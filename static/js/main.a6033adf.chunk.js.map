{"version":3,"sources":["HelperConst.js","Space.js","ComputeFunc.js","Business.js","Income.js","Probe.js","objInit/BusinessInit.js","objInit/UpgradeInit.js","objInit/NeumannInit.js","Upgrades.js","Announce.js","Sliders.js","Settings.js","Prestige.js","Neumann.js","index.js"],"names":["Decimal","require","numberformat","HelperConst","react_default","a","createElement","className","this","moneySymbol","knowledgeSymbol","prestigeSymbol","multiplySymbol","concentrateSymbol","myId","checked","onClick","type","name","id","onChange","htmlFor","DEBUG","console","log","apply","arguments","num","myFormatterNum","format","toLowerCase","myFormatterInt","backend","sigfigs","maxSmall","myNumFormat","Formatter","myNumCfg","myIntFormat","myIntCfg","thumbsUpSymbol","purchaseOpts","purchaseOptsNum","filter","item","match","purchaseOptsSpecial","busBuyMilestones","vonNeumannWiki","href","mylog","DebugLog","Space","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","centerCanvas","x","y","pulseRadius","centerRadius","innerRadius","outerRadius","moonLocation","conv","convertDistanceToSpace","probe","distance","mapDistance","dist","zoomLevel","idx","zoomName","planetColors","earth","sun","sunsmall","setPlanetSize","zoomDuration","zoomShown","pulseColor","pulseColorCt","starClass","planetRadius","planetColorStops","outerEllipseRef","setAttrs","radiusX","radiusY","innerEllipseRef","centerEllipseRef","pulsePause","outerEllipseMoving","innerEllipseMoving","resetProbeZoom","pulseFactor","div","xRadius","times","floor","toNumber","yRadius","_this2","eq","plus","getDistPerTick","timeMultiplier","pulseRef","probeRadius","calcProbePulseRadius","Math","sin","toFixed","toOuterRadX","toOuterRadY","toInnerRadX","toInnerRadY","toCenterRadX","toCenterRadY","to","duration","onFinish","probeOuterZoomFinished","probeInnerZoomFinished","centerPlanetRef","radius","getSpaceInfoForIndex","_this3","rows","push","ReactKonva","key","stroke","fill","ref","node","fillRadialGradientStartPoint","fillRadialGradientStartRadius","fillRadialGradientEndPoint","fillRadialGradientEndRadius","fillRadialGradientColorStops","dash","Fragment","points","strokeWidth","processSpaceMap","generateSpaceRender","probeDivRef","width","height","hitGraphEnabled","text","showInt","fontSize","fontFamily","fontStyle","align","definedLevels","spaceZoomLevels","length","spaceZoomLevelNames","baseE9","diff","pow","d","n","gt","newDist","showNum","React","Component","ComputeFunc","value","pct","numType","owned","max","maxPoss","maxCheck","retIdx","forEach","milestone","num100s","hardcodeMax","fromIdx","toIdx","milestones","c","getTotalMilestone","fromCt","toCt","from25s","to25s","from100s","to100s","retArr","resource","timeAdj","timeCounter","revenue","timeInterval","totalRevenue","sqrt","maxEarnings","minus","busStat","purchaseAmt","maxbuys","maxBuy","numBuy","parseInt","cost","costBase","costCoef","itemStat","maxUpg","availMaxUpgrade","maxOcd","primes","primeFactors","primeTime","myMaxPrime","Max","Max OCD","Max Upg","PrimeTime","primesFwd","time","i","j","store","timeEnd","milliseconds","day","hour","minute","seconds","showWith0","concat","days","hours","minutes","Business","domRefs","findIndex","domRef","bus","overlays","map","o","ovClass","curLeft","getDomRef","current","offsetLeft","curTop","offsetTop","counter","expire","topChg","leftChg","ovType","react_motion","defaultStyle","top","left","opacity","style","spring","yTarget","xTarget","stiffness","damping","sources","businesses","reduce","result","userSettings","busStats","revealed","totalEarningPerSec","computeTotalEarningPerSec","concentrate","b","myCost","getCost","money","nextPayout","computeNextPayoutValue","buyPctStyle","buyPct","earnPctStyle","earnPct","buttonClass","costClass","buttonDisabled","gte","myEarningPerSec","computeEarningPerSec","curPayout","myPayout","myEarningPct","getEarningPct","overlayItems","genOverlays","disabled","multiplySymbolSpan","moneySymbolSpan","buyNum","nextOwned","num25s","mult25","mult100","prestigeMultiplier","prestige","val","incomeBase","payoutAdj","items","payout","_this4","getPayout","mult","update","upgradeMult","$set","milestoneIdx","timeBase","reactRef","ReactDOM","findDOMNode","getBoundingClientRect","overlayCt","Income","learning","rowsLeft","rowsRight","prestigeNext","prestigeSymbolSpan","featureEnabled","knowledgeSymbolSpan","knowledge","getDistPerSec","data-text","Probe","pSpeed","pQuality","pCombat","speed","quality","combat","number","qualityLoss","combatLoss","lt","losses","distPerSec","speedQ","goFarther","NeumannInit","freshState","desc","incomeType","costType","initialVisible","upgrades","watchType","watchValue","costValue","rewardType","rewardTarget","rewardValue","watchTarget","announcements","modals","version","concentrateClass","lifetimeEarnings","lifetimeLearning","curMaxMoney","curTotalClicks","buyMilestone","0","upgStats","toggles","Upgrades","u","purchased","rewardInfo","buyClass","bgClass","costSymbol","clickAction","enableFeature","bgAnim","rsc_esm","permanentTrackY","Announce","index","annClass","ack","createSliderWithTooltip","Slider","MyRange","Range","MySlider","Sliders","probeSpendPct","rangeCt","distribRange","handleStyle","backgroundColor","border","trackStyle","railStyle","sliderCallback","min","marks","sliderMarks","step","defaultValue","dotStyle","activeDotStyle","allowCross","tipFormatter","tipProps","placement","rangeCallback","count","rangeSettings","pushable","fontWeight","color","label","25","50","75","100","Settings","onoffswitch","toggleOverlay","Prestige","Neumann","state","objectSpread","helpModalIsOpen","timerRunning","pauseClass","lastLoop","Date","now","gameSavedHide","gameSavedNotify","gameSavedCountdown","gameSavedObj","content","countdown","announceCt","modalCt","gameIntervalId","prestigeIntervalId","gameSaveIntervalId","tabIndex","sliderInfo","getRangeValues","probePcts","populateBusDomRefs","populateInitVals","bind","assertThisInitialized","restart","resetAll","pause","resume","loadGame","saveGame","decrementSavedGameObj","updatePrestigeEarned","updateGame","clickBusiness","clickUpgrade","clickAnnouncement","purchaseAmtDropDownHandler","announce","sliderChange","rangeChange","purchaseProbe","getSettingsTab","clickConcentrate","decrementConcentrate","updateConcentrate","openHelpModal","closeHelpModal","afterOpenHelpModal","prestigeCheat","moneyCheat","cheatPrestigeVal","setState","isLoaded","Modal","setAppElement","clearInterval","document","title","createRef","setInterval","pulseMoving","stopSaveGameInterval","startSaveGameInterval","ls","SecureLS","encodingType","saveString","get","decimalKeys","JSON","parse","includes","tempProbe","saveTime","deltaMillis","convertMillis","gained","saveStringText","stringify","set","concButtonClass","newVal","newPrestigeNext","calcPrestigeEarnedFromMax","newPrestige","amt","updatePurchaseAmt","indexOf","changed","newBusinesses","addVal","newItem","numPayouts","activeOverlays","newAnnouncements","fadeout","newAnn","_this5","busCost","newB","bonusArr","ownedMilestones","getOwnedMilestonesAttained","busMult","genOverlayObj","genOverlayArr","curIdx","getTotalMilestoneIdx","newLowest","keys","Number","MAX_SAFE_INTEGER","newIdx","getAdjustedTimeBase","getTotalMilestonesAttained","feature","reportRangePcts","upg","addOverlay","atest","defineProperty","_this6","today","getHours","getMinutes","getSeconds","getMilliseconds","toConsumableArray","createTime","undefined","xAdj","random","yAdj","origOverlay","slice","busIdx","_this7","pSpeedPct","pQualityPct","pCombatPct","pCost","getPct","pcts","_this8","dt","fpsPct","incrementBusinessCounters","incrementProbeDistance","incrementAnnouncementCounters","payoutMoneyThisTick","getAllPayouts","payoutKnowledgeThisTick","lte","setTitle","esm","probebutton","probeattribs","sliderattribs","offlinetext","currentProbe","sliderText","getSlider","getRange","Space_Space","event","target","Settings_Settings","Prestige_Prestige","subtitle","debugButtons","_this9","Income_Income","selectedIndex","onSelect","changeTabs","getTabList","Upgrades_Upgrades","dist_default","options","placeholder","abs","Business_Business","getProbeTab","getPrestigeTab","Announce_Announce","lib_default","isOpen","onRequestClose","contentLabel","shouldCloseOnOverlayClick","overlayClassName","modalHelp","render","Neumann_Neumann","getElementById"],"mappings":"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","file":"static/js/main.a6033adf.chunk.js","sourcesContent":["import React from 'react';\n// import { Decimal } from 'decimal.js';\nimport './styles/fonts.css';\nconst Decimal = require('decimal.js');\nconst numberformat = require('swarm-numberformat');\n\n// const DEBUG = true;\n\n\nexport default class HelperConst {\n    static DEBUG = true;\n\n    static moneySymbol = \"$\";\n    // static knowledgeSymbol = \"\";\n    static knowledgeSymbol = '\\u29a8';\n    // static knowledgeSymbol = \"&\";\n    static prestigeSymbol = '\\u039b';\n\n    // static rightarrow = '\\u2b95';\n\n    // static multiplySymbol = '\\u2718';\n    static multiplySymbol = '\\u2a2f';\n\n    static thumbsUpSymbol = '\\uD83D\\uDC4D\\uFE0E';\n    static concentrateSymbol = '\\uD83D\\uDE2C\\uFE0E';\n\n    static moneySymbolSpan() { return (<span className=\"moneySymbol\">{this.moneySymbol}</span>); };\n    static knowledgeSymbolSpan() { return (<span className=\"knowledgeSymbol\">{this.knowledgeSymbol}</span>); };\n    static prestigeSymbolSpan() { return (<span className=\"prestigeSymbol\">{this.prestigeSymbol}</span>); };\n    static multiplySymbolSpan() { return (<span className=\"multiplySymbol\">{this.multiplySymbol}</span>); };\n    static concentrateSymbolSpan() { return (<span className=\"concentrateSymbol\">{this.concentrateSymbol}</span>); };\n\n\n    /* https://proto.io/freebies/onoff/ */\n    static onoffswitch(myId, checked, onClick) {\n        if (myId)\n            return (\n                <div className=\"onoffswitch\">\n                    <input type=\"checkbox\" name=\"onoffswitch\" className=\"onoffswitch-checkbox\"\n                        id={\"toggle\"+myId}\n                        onChange={onClick}\n                        checked={checked}\n                    />\n                    <label className=\"onoffswitch-label\" htmlFor={\"toggle\"+myId}>\n                        <span className=\"onoffswitch-inner\"></span>\n                        <span className=\"onoffswitch-switch\"></span>\n                    </label>\n                </div>\n            )\n    }\n\n    static purchaseOpts = [\"1\", \"10\", \"25\", \"100\", \"Max\", \"Max OCD\", \"Max Upg\", \"PrimeTime\"];\n    static purchaseOptsNum = this.purchaseOpts.filter(item => item.match(/\\d/));\n    static purchaseOptsSpecial = this.purchaseOpts.filter(item => !item.match(/\\d/));\n\n    // set all-business milestones for time boost, including all 100's\n    static busBuyMilestones = [10, 25, 50];\n\n    // // in kilometers\n    // static spaceZoomLevels = [\n    //     new Decimal(\"384400\"),  // moon\n    //     new Decimal(\"2.8746e11\"), // solar system\n    //     new Decimal(\"9.5e17\"),  //  milky way (diameter)\n    //     new Decimal(\"1.11e20\"),  // NGC 4945\n    //     new Decimal(\"440e24\"),  // observable universe\n    //     // new Decimal(\"Infinity\"),\n    // ];\n    // static spaceZoomLevelNames = [\n    //     \"Moon\",\n    //     \"Solar System\",\n    //     \"Milky Way\",\n    //     \"Galaxy NGC 4945\",\n    //     \"Edge of Observable Universe\",\n    // ];\n\n    static DebugLog() {\n        if (HelperConst.DEBUG) {\n            console.log.apply(console, arguments);\n        }\n    }\n\n    static showNum(num) {\n        // this.DebugLog(\"num:\",num);\n        return HelperConst.myFormatterNum().format(num).toLowerCase();\n    }\n\n    static showInt(num) {\n        return HelperConst.myFormatterInt().format(num).toLowerCase();\n    }\n\n    static myNumCfg() {\n        return ({\n            backend: 'decimal.js',\n            sigfigs: 4,\n            maxSmall: 100,\n            format: 'engineering',\n            Decimal: Decimal\n        });\n    };\n\n    static myIntCfg() {\n        return ({\n            backend: 'decimal.js',\n            sigfigs: 4,\n            maxSmall: 0,\n            format: 'engineering',\n            Decimal: Decimal\n        });\n    };\n\n    static myFormatterNum() {\n        if (!this.myNumFormat) {\n            this.myNumFormat = new numberformat.Formatter(HelperConst.myNumCfg());\n        }\n        return this.myNumFormat;\n\n    }\n    static myFormatterInt() {\n        if (!this.myIntFormat) {\n            this.myIntFormat = new numberformat.Formatter(HelperConst.myIntCfg());\n        }\n        return this.myIntFormat;\n\n    }\n\n    static vonNeumannWiki = <a href=\"https://google.com\">google</a>;\n    static modalHelp() {\n        return `\nThis is the help text.\nYou click businesses, earn money, and see where that can take you...\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n` ;\n    }\n}","import React from 'react';\n// import Konva from 'konva';\nimport { Stage, Layer, Circle, Ellipse, Line, Text } from 'react-konva';\n// import MyPortal from './MyPortal';\n// import ComputeFunc from './ComputeFunc';\nimport HelperConst from './HelperConst';\n// import ComputeFunc from './ComputeFunc';\nimport Decimal from 'decimal.js';\nconst mylog = HelperConst.DebugLog;\n\nexport default class Space extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.centerCanvas = {\n            x: 400,\n            y: 250,\n        };\n        this.pulseRadius = {\n            x: 0,\n            y: 0,\n        };\n        this.centerRadius = {\n            x: 0,\n            y: 0,\n        }\n        this.innerRadius = {\n            x: 300,\n            y: 150,\n        };\n        this.outerRadius = {\n            x: this.innerRadius.x * 3,\n            y: this.innerRadius.y * 3,\n        }\n        this.moonLocation = {\n            x: this.centerCanvas.x + 130,\n            y: this.centerCanvas.y - 135,\n        }\n\n        const conv = Space.convertDistanceToSpace(this.props.probe.distance);\n        this.mapDistance = conv.dist;\n        this.zoomLevel = conv.idx;\n        this.zoomName = conv.name;\n\n        // this.planetColors = {\n        //     'earth': [0.4, '#1A8A09', 0.8, '#163bb5', 0.9, '#333'],\n        //     'sun': [0.4, '#fadf98', 0.8, '#B1954D', 1, '#333'],\n        // }\n        this.planetColors = {\n            'earth': [0.1, '#1A8A09', 0.65, '#163bb5', 0.75, '#333'],\n            'sun': [0.4, '#fadf98', 0.8, '#B1954D', 1, '#333'],\n            'sunsmall': [0.4, '#fadf98', 1, '#B1954D'],\n        }\n        this.setPlanetSize();\n\n\n        this.zoomDuration = 0.25;\n        this.zoomShown = this.zoomLevel;\n\n        this.pulseColor = \"#222\";\n        this.pulseColorCt = 0;\n\n        this.starClass = \"stars starpause\";\n\n        mylog(\"init mapDistance:\", this.mapDistance, \"zoomLevel:\", this.zoomLevel, \"zoomShown:\", this.zoomShown, \"zoomName:\", this.zoomName);\n    }\n\n    /* view DIAMETERS */\n    static spaceZoomLevels = [\n        new Decimal(\"768e3\"),  // moon\n        new Decimal(\"1.556e9\"),    // Jupiter\n        new Decimal(\"287.46e9\"), // solar system\n        new Decimal(\"15e12\"),    // Oort Cloud\n        new Decimal(\"950e15\"),  //  milky way (diameter)\n        new Decimal(\"111e18\"),  // NGC 4945\n        new Decimal(\"440e24\"),  // observable universe\n        // new Decimal(\"Infinity\"),\n    ];\n    static spaceZoomLevelNames = [\n        \"Moon\",\n        \"Jupiter\",\n        \"Solar System\",\n        \"Oort Cloud\",\n        \"Milky Way\",\n        \"Galaxy NGC 4945\",\n        \"Edge of Observable Universe\",\n    ];\n\n    static getSpaceInfoForIndex(idx) {\n        const definedLevels = Space.spaceZoomLevels.length;\n        if (idx < definedLevels) {\n            return { idx: idx, dist: Space.spaceZoomLevels[idx], name: Space.spaceZoomLevelNames[idx] };\n        } else {\n            const baseE9 = Space.spaceZoomLevels[definedLevels - 1].log(\"1e9\").floor().toNumber();\n            const diff = idx - definedLevels;\n            return { idx: idx, dist: new Decimal(\"1e9\").pow(baseE9 + diff + 1), name: \"Dark Unknown\" };\n        }\n    }\n\n    static convertDistanceToSpace(d) {\n        const definedLevels = Space.spaceZoomLevels.length;\n        for (let n = 0; n < definedLevels; n++) {\n            const dist = Space.spaceZoomLevels[n];\n            if (dist.gt(d)) return { idx: n, dist: dist, name: this.spaceZoomLevelNames[n] };\n        }\n        const baseE9 = Space.spaceZoomLevels[definedLevels - 1].log(\"1e9\").floor().toNumber();\n        const dFloor = d.log(\"1e9\").floor().toNumber();\n        const diff = dFloor - baseE9;\n        // const numE10 = definedLevels + dFloor.toNumber() - lvlE10;\n        // mylog(\"dFloor:\",dFloor,\"baseE9:\",baseE9);\n        const newDist = new Decimal(\"1e9\").pow(baseE9 + diff + 1);\n        mylog(\"newDist:\", HelperConst.showNum(newDist));\n\n        return { idx: definedLevels + diff, dist: new Decimal(\"1e9\").pow(baseE9 + diff + 1), name: \"Dark Unknown\" };\n    }\n\n    setPlanetSize() {\n        // set planet size\n        if (this.zoomLevel === 0) {\n            // Moon\n            this.planetRadius = 10;\n            this.planetColorStops = this.planetColors.earth;\n        } else if (this.zoomLevel === 1) {\n            // Jupiter\n            this.planetRadius = 10;\n            this.planetColorStops = this.planetColors.sun;\n        } else if (this.zoomLevel === 2) {\n            // Solar System\n            this.planetRadius = 3;\n            this.planetColorStops = this.planetColors.sunsmall;\n        } else {\n            this.planetRadius = 0;\n        }\n    }\n\n    resetProbeZoom() {\n        // const conv = ComputeFunc.getSpaceInfoForIndex(this.zoomShown);\n        // this.mapDistance = conv.dist;\n        // this.zoomLevel = conv.idx;\n        // this.zoomName = conv.name;\n        // mylog(\"reset mapDistance:\", this.mapDistance, \"zoomLevel:\", this.zoomLevel, \"zoomShown:\", this.zoomShown, \"zoomName:\", this.zoomName);\n\n        if (this.outerEllipseRef) this.outerEllipseRef.setAttrs({\n            'radiusX': this.outerRadius.x,\n            'radiusY': this.outerRadius.y,\n        })\n        if (this.innerEllipseRef) this.innerEllipseRef.setAttrs({\n            'radiusX': this.innerRadius.x,\n            'radiusY': this.innerRadius.y,\n        })\n        if (this.centerEllipseRef) this.centerEllipseRef.setAttrs({\n            'radiusX': this.centerRadius.x,\n            'radiusY': this.centerRadius.y,\n        })\n\n        this.setPlanetSize();\n\n        this.pulsePause = false;\n        this.starClass = \"stars starpause\";\n    }\n\n    probeOuterZoomFinished() {\n        this.outerEllipseMoving = false;\n        !this.innerEllipseMoving && this.resetProbeZoom();\n\n    }\n    probeInnerZoomFinished() {\n        this.innerEllipseMoving = false;\n        !this.outerEllipseMoving && this.resetProbeZoom();\n    }\n\n    calcProbePulseRadius() {\n        const pulseFactor = this.props.probe.distance\n            .div(this.mapDistance);\n\n        let xRadius = pulseFactor\n            .times(this.innerRadius.x)\n            .floor()\n            // .plus(this.planetRadius).plus(1)\n            .toNumber();\n        if (xRadius < (this.planetRadius + 2)) xRadius = this.planetRadius + 2;\n\n        let yRadius = pulseFactor\n            .times(this.innerRadius.y)\n            .floor()\n            // .plus(this.planetRadius).plus(1)\n            .toNumber();\n        if (yRadius < (this.planetRadius + 2)) yRadius = this.planetRadius + 2;\n\n        return { x: xRadius, y: yRadius };\n    }\n\n\n    processSpaceMap() {\n        if (this.props.probe.distance.eq(0)) {\n            this.zoomLevel = (Space.convertDistanceToSpace(\n                this.props.probe.distance.plus(this.props.probe.getDistPerTick(this.props.timeMultiplier)))\n            ).idx;\n        } else {\n            this.zoomLevel = Space.convertDistanceToSpace(this.props.probe.distance).idx;\n        }\n        // mylog(\"zoomLevel:\",this.zoomLevel, \"zoomShown:\",this.zoomShown);\n\n        /* set probe distance pulse */\n        if (this.pulseRef) {\n            const probeRadius = (\n                this.props.probe.distance.eq(0)\n                || (this.zoomLevel !== this.zoomShown)\n                || this.outerEllipseMoving\n                || this.innerEllipseMoving)\n                ? { x: 0, y: 0 }\n                : this.calcProbePulseRadius();\n            this.pulseRef.setAttrs({\n                'radiusX': probeRadius.x,\n                'radiusY': probeRadius.y,\n            })\n        }\n        /* set pulse color */\n        this.pulseColorCt = (this.pulseColorCt + this.props.timeMultiplier);\n        // this.pulseColor = this.pulseColors[Math.floor(this.pulseColorCt % this.pulseColors.length)];\n        this.pulseColor = \"rgba(85,85,0,\" + (((Math.sin(this.pulseColorCt) + 1) / 4) + 0.5).toFixed(1) + \")\"\n        // mylog(\"pulseColor:\",this.pulseColor);\n\n        // if ((this.zoomLevel === this.zoomShown)) {\n        //     this.resetProbeZoom();\n        // }\n\n        /* \"zoom\" space map if zoom level changes */\n        if ((this.zoomLevel !== this.zoomShown)\n            && this.outerEllipseRef\n            && this.innerEllipseRef\n            && this.centerEllipseRef\n            && !this.outerEllipseMoving\n            && !this.innerEllipseMoving) {\n\n            mylog(\"before reset.  zoomShown:\", this.zoomShown, \"zoomLevel:\", this.zoomLevel);\n            this.resetProbeZoom();\n\n            let toOuterRadX, toOuterRadY, toInnerRadX, toInnerRadY, toCenterRadX, toCenterRadY;\n            if (this.zoomLevel > this.zoomShown) {\n                // shrink ellipse\n                toOuterRadX = this.innerRadius.x;  // shrink\n                toOuterRadY = this.innerRadius.y;\n                toInnerRadX = 0;  // shrink\n                toInnerRadY = 0;\n                toCenterRadX = 0;  // stay\n                toCenterRadY = 0;\n                this.starClass = \"stars starzoom\";\n                this.zoomShown += 1;\n            } else {\n                // grow ellipse\n                toOuterRadX = this.outerRadius.x;  // stay\n                toOuterRadY = this.outerRadius.y;\n                toInnerRadX = this.outerRadius.x;  // grow\n                toInnerRadY = this.outerRadius.y;\n                toCenterRadX = this.innerRadius.x;  // grow\n                toCenterRadY = this.innerRadius.y;\n                this.starClass = \"stars starshrink\";\n                this.zoomShown -= 1;\n            }\n\n            this.setPlanetSize();\n\n\n            if (!this.outerEllipseMoving) {\n                mylog(\"ring anim starting\");\n                this.outerEllipseMoving = true;\n                this.outerEllipseRef.to({\n                    duration: this.zoomDuration,\n                    radiusX: toOuterRadX,\n                    radiusY: toOuterRadY,\n                    onFinish: () => {\n                        this.probeOuterZoomFinished();\n                    },\n                });\n                this.innerEllipseMoving = true;\n                this.innerEllipseRef.to({\n                    duration: this.zoomDuration,\n                    radiusX: toInnerRadX,\n                    radiusY: toInnerRadY,\n                    onFinish: () => {\n                        this.probeInnerZoomFinished();\n                    },\n                });\n                this.centerPlanetRef.to({\n                    duration: this.zoomDuration,\n                    radius: this.planetRadius\n                });\n                this.centerEllipseRef.to({\n                    duration: this.zoomDuration,\n                    radiusX: toCenterRadX,\n                    radiusY: toCenterRadY,\n                });\n            }\n\n            const conv = Space.getSpaceInfoForIndex(this.zoomShown);\n            this.mapDistance = conv.dist;\n            this.zoomName = conv.name;\n            // mylog(\"process mapDistance:\", this.mapDistance, \"zoomLevel:\", this.zoomLevel, \"zoomShown:\", this.zoomShown, \"zoomName:\", this.zoomName);\n            // mylog(\"starclass:\",this.starClass);\n        }\n    }\n\n    generateSpaceRender() {\n        let rows = [];\n        rows.push(\n            <Ellipse\n                key=\"pulse\"\n                id='pulse'\n                x={this.centerCanvas.x}\n                y={this.centerCanvas.y}\n                radiusX={this.pulseRadius.x}\n                radiusY={this.pulseRadius.y}\n                stroke={this.pulseColor}\n                fill=\"rgba(85,85,85,0.2)\"\n                ref={node => {\n                    this.pulseRef = node;\n                }}\n            />\n        );\n        rows.push(\n            <Circle\n                key=\"centerPlanet\"\n                id='centerPlanet'\n                x={this.centerCanvas.x}\n                y={this.centerCanvas.y}\n                radius={this.planetRadius}\n                // fill=\"green\"\n                fillRadialGradientStartPoint={{\n                    x: -5,\n                    y: -5,\n                }}\n                fillRadialGradientStartRadius={1}\n                fillRadialGradientEndPoint={{\n                    x: -5,\n                    y: -5,\n                }}\n                fillRadialGradientEndRadius={this.planetRadius*2}\n                fillRadialGradientColorStops={this.planetColorStops}\n                ref={node => {\n                    this.centerPlanetRef = node;\n                }}\n            />\n        );\n        rows.push(\n            <Ellipse\n                key=\"centerEllipse\"\n                id='centerEllipse'\n                x={this.centerCanvas.x}\n                y={this.centerCanvas.y}\n                radiusX={this.centerRadius.x}\n                radiusY={this.centerRadius.y}\n                stroke=\"#d55\"\n                dash={[5, 5]}\n                ref={node => {\n                    this.centerEllipseRef = node;\n                }}\n            />\n        );\n        rows.push(\n            <Ellipse\n                key=\"innerEllipse\"\n                id='innerEllipse'\n                x={this.centerCanvas.x}\n                y={this.centerCanvas.y}\n                radiusX={this.innerRadius.x}\n                radiusY={this.innerRadius.y}\n                stroke=\"#d55\"\n                dash={[5, 5]}\n                ref={node => {\n                    this.innerEllipseRef = node;\n                }}\n            />\n        );\n        rows.push(\n            <Ellipse\n                key=\"outerEllipse\"\n                id='outerEllipse'\n                x={this.centerCanvas.x}\n                y={this.centerCanvas.y}\n                radiusX={this.outerRadius.x}\n                radiusY={this.outerRadius.y}\n                stroke=\"#d55\"\n                dash={[5, 5]}\n                ref={node => {\n                    this.outerEllipseRef = node;\n                }}\n            />\n        );\n\n        if (this.zoomShown === 0) {\n            /* moon for closest zoom */\n            rows.push(\n                <Circle\n                    key=\"moon\"\n                    id='moon'\n                    x={this.moonLocation.x}\n                    y={this.moonLocation.y}\n                    radius={5}\n                    fillRadialGradientStartPoint={{\n                        x: -5,\n                        y: -5,\n                    }}\n                    fillRadialGradientStartRadius={1}\n                    fillRadialGradientEndPoint={{\n                        x: -5,\n                        y: -5,\n                    }}\n                    fillRadialGradientEndRadius={8}\n                    fillRadialGradientColorStops={[0.4, '#ddd', 0.9, '#aaa', 1, '#333']}\n                />\n            );\n        }\n        if (this.zoomShown > 2) {\n            /* reticle */\n            rows.push(\n                <React.Fragment key=\"crossHairFragment\">\n                    <Line\n                        key=\"crossHair1\"\n                        points={[this.centerCanvas.x - 5, this.centerCanvas.y, this.centerCanvas.x + 5, this.centerCanvas.y]}\n                        stroke=\"#d55\"\n                        strokeWidth={1}\n                    />\n                    <Line\n                        key=\"crossHair2\"\n                        points={[this.centerCanvas.x, this.centerCanvas.y - 5, this.centerCanvas.x, this.centerCanvas.y + 5]}\n                        stroke=\"#d55\"\n                        strokeWidth={1}\n                    />\n                </React.Fragment>\n            );\n        }\n\n        return rows;\n    }\n\n\n    render() {\n        this.processSpaceMap();\n        const rows = this.generateSpaceRender();\n\n        return (\n            <div id=\"probecontent\" ref={this.probeDivRef}  >\n                <div className={this.starClass} />\n                <div className={this.starClass} />\n                <div className={this.starClass} />\n                <div className={this.starClass} />\n                <div className={this.starClass} />\n\n                <Stage width={794} height={538} className=\"dynamic-layer\" >\n\n                    <Layer hitGraphEnabled={false}>\n                        {rows}\n                    </Layer>\n                    <Layer className=\"static-layer\" hitGraphEnabled={false}>\n\n                        {/* verticals */}\n                        <Line\n                            points={[this.centerCanvas.x - this.innerRadius.x, this.centerCanvas.y + this.innerRadius.y + 10, this.centerCanvas.x - this.innerRadius.x, this.centerCanvas.y + this.innerRadius.y + 50]}\n                            stroke=\"#d55\"\n                            strokeWidth={1}\n                        />\n                        <Line\n                            points={[this.centerCanvas.x + 110, this.centerCanvas.y + this.innerRadius.y + 30, this.centerCanvas.x + this.innerRadius.x, this.centerCanvas.y + this.innerRadius.y + 30]}\n                            stroke=\"#d55\"\n                            strokeWidth={1}\n                        />\n\n                        {/* left and right */}\n                        <Line\n                            points={[this.centerCanvas.x - this.innerRadius.x, this.centerCanvas.y + this.innerRadius.y + 30, this.centerCanvas.x - 110, this.centerCanvas.y + this.innerRadius.y + 30]}\n                            stroke=\"#d55\"\n                            strokeWidth={1}\n                        />\n                        <Line\n                            points={[this.centerCanvas.x + this.innerRadius.x, this.centerCanvas.y + this.innerRadius.y + 10, this.centerCanvas.x + this.innerRadius.x, this.centerCanvas.y + this.innerRadius.y + 50]}\n                            stroke=\"#d55\"\n                            strokeWidth={1}\n                        />\n\n                        <Text\n                            x={this.centerCanvas.x - 100}\n                            y={this.centerCanvas.y + this.innerRadius.y + 24}\n                            width={200}\n                            text={\"Zoom #\" + this.zoomShown + \": \" + HelperConst.showInt(this.mapDistance) + \" km\"}\n                            fontSize={16}\n                            fontFamily={'Kodchasan'}\n                            fontStyle={'bold'}\n                            align=\"center\"\n                            fill=\"#1A8A09\"\n                        />\n                        <Text\n                            x={this.centerCanvas.x - 100}\n                            y={this.centerCanvas.y + this.innerRadius.y + 45}\n                            width={200}\n                            text={this.zoomName}\n                            fontSize={16}\n                            fontFamily={'Kodchasan'}\n                            align=\"center\"\n                            fill=\"#1A8A09\"\n                        />\n                        {/* <MyPortal>\n                            <button id=\"portal-button\" disabled={true}>{HelperConst.showNum(Space.spaceZoomLevels[this.zoomShown])}</button>\n                        </MyPortal> */}\n\n\n                    </Layer>\n                </Stage>\n\n            </div>\n        )\n    }\n}","// import { Decimal } from 'decimal.js';\nimport './styles/fonts.css';\nimport HelperConst from './HelperConst';\n// import Space from './Space';\nconst Decimal = require('decimal.js');\nconst mylog = HelperConst.DebugLog;\n\nexport default class ComputeFunc {\n\n    static getPct(value, pct) {\n        const numType = typeof (value);\n        // mylog(\"Decimal:\",value instanceof Decimal);\n        // mylog(\"typeof value:\",numType);\n        if (value instanceof Decimal) {\n            return value.times(pct / 100).floor();\n        } else if (numType === \"number\") {\n            return Math.floor(value * (pct / 100));\n        }\n    }\n\n    static availMaxUpgrade(owned, max) {\n        const maxPoss = owned + max;\n        if (maxPoss >= 100) {\n            const maxCheck = Math.floor(maxPoss / 100) * 100;\n            return (maxCheck <= owned) ? maxCheck + 100 : maxCheck;\n        } else if (maxPoss >= 75) {\n            return (owned >= 75) ? 100 : 75;\n        } else if (maxPoss >= 50) {\n            return (owned >= 50) ? 75 : 50;\n        } else {\n            return (owned >= 25) ? 50 : 25;\n        }\n    }\n\n    static getTotalMilestoneIdx(num) {\n        // mylog(\"testing new milestone:\", num);\n        let retIdx = -1;\n        HelperConst.busBuyMilestones.forEach((milestone, idx) => {\n            // mylog(\"num:\",num,\" milestone:\",milestone);\n            if (num >= milestone) { retIdx = idx; }\n        });\n        const num100s = Math.floor(num / 100);\n        return (retIdx + num100s);\n    }\n\n    static getTotalMilestone(idx) {\n        const hardcodeMax = HelperConst.busBuyMilestones.length - 1;\n        if (idx <= hardcodeMax) { return HelperConst.busBuyMilestones[idx] };\n        const diff = (idx - hardcodeMax);\n        return (100 * diff);\n    }\n\n    static getTotalMilestonesAttained(fromIdx, toIdx) {\n        let milestones = [];\n        for (let c = fromIdx + 1; c <= toIdx; c++) {\n            milestones.push([this.getTotalMilestone(c)]);\n        }\n        return milestones;\n    }\n\n    static getOwnedMilestonesAttained(fromCt, toCt) {\n        const from25s = Math.floor(fromCt / 25) > 3 ? 3 : Math.floor(fromCt / 25);\n        const to25s = Math.floor(toCt / 25) > 3 ? 3 : Math.floor(toCt / 25);\n        const from100s = Math.floor(fromCt / 100);\n        const to100s = Math.floor(toCt / 100);\n        let retArr = [];\n        if (from25s < to25s) {\n            for (let n = from25s + 1; n <= to25s; n++) {\n                retArr.push(n * 25);\n            }\n        }\n        if (from100s < to100s) {\n            for (let n = from100s + 1; n <= to100s; n++) {\n                retArr.push(n * 100);\n            }\n        }\n        mylog(\"owned milestones:\", retArr);\n        return retArr;\n    }\n\n    static buyPct(num, resource) {\n        const pct = resource.div(num).times(100).toNumber()\n        return pct > 100 ? 100 : pct;\n    }\n\n    static earnPct(item, timeAdj) {\n        if (timeAdj < 0.2 || (timeAdj - item.timeCounter) < 0.1) {\n            return 100;\n        }\n        return (item.timeCounter / timeAdj) * 100;\n    }\n\n    static getEarningPerTick(revenue, timeInterval) {\n        return revenue.times(timeInterval / 1000);\n    }\n\n    static getEarningPct(revenue, totalRevenue) {\n        return revenue.div(totalRevenue).times(100).toFixed(2);\n    }\n\n    static calcPrestigeEarned(revenue) {\n        return Decimal.sqrt(revenue.div(Math.pow(10, 9))).times(150).floor();\n    }\n\n    static calcPrestigeEarnedFromMax(maxEarnings) {\n        return maxEarnings.div(Math.pow(10, 12)).times(8).plus(1).sqrt().minus(1).div(2);\n    }\n\n    static getCost(item, busStat, purchaseAmt, resource) {\n\n        const maxbuys = this.maxBuy(item, busStat, resource);\n        // mylog(maxbuys);\n        let numBuy = 0;\n\n        switch (purchaseAmt) {\n            case \"Max\":\n            case \"Max OCD\":\n            case \"Max Upg\":\n            case \"PrimeTime\":\n                numBuy = maxbuys[purchaseAmt];\n                break;\n            default:\n                numBuy = purchaseAmt;\n                break;\n        }\n\n        return {\n            num: parseInt(numBuy, 10),\n            cost: item.costBase.times(\n                Math.pow(item.costCoef, busStat.owned) * (Math.pow(item.costCoef, numBuy) - 1)\n            ).div(item.costCoef - 1),\n        }\n    }\n\n    static maxBuy(item, itemStat, resource) {\n        // mylog(\"resource is \", typeof (resource), \", \", resource.times(1).toFixed());\n        const max = parseInt(new Decimal(\n            resource\n                .times(item.costCoef - 1)\n                .div(\n                    item.costBase.times(\n                        Math.pow(item.costCoef, itemStat.owned))\n                )\n        ).plus(1).log(item.costCoef).floor(), 10);\n\n        const maxUpg = this.availMaxUpgrade(itemStat.owned, max) - itemStat.owned;\n\n        let maxOcd = (Math.floor((max + itemStat.owned) / 25) * 25)\n            - itemStat.owned;\n        maxOcd = maxOcd > 0 ? maxOcd : 25 - (itemStat.owned % 25);\n        // mylog(\"maxOcd:\", maxOcd, \" owned remainder:\", (item.owned % 25));\n\n        const primes = this.primeFactors();\n        let primeTime = 0;\n\n        // console.time('primeidx');\n        const myMaxPrime = itemStat.owned + max;\n        for (const idx in primes) {\n            if (primes[idx] <= itemStat.owned) continue;\n            if (primes[idx] <= myMaxPrime) primeTime = primes[idx];\n            if (primes[idx] > myMaxPrime) {\n                if (primeTime === 0) primeTime = primes[idx];\n                break;\n            };\n        }\n        primeTime -= itemStat.owned;\n        // console.timeEnd('primeidx');\n\n        return ({\n            Max: max > 0 ? max : 1,\n            \"Max OCD\": maxOcd,\n            \"Max Upg\": maxUpg,\n            PrimeTime: primeTime,\n        });\n    }\n\n    static nextPrime(num) {\n        const primes = this.primeFactors();\n        for (const idx in primes) {\n            if (primes[idx] > num) {\n                return primes[idx];\n            }\n        }\n    }\n\n    static primeFactors() {\n        if (this.primes) {\n            return this.primes;\n        }\n        var max = 25000;\n        var primesFwd = [];\n        mylog(\"creating primes\");\n        console.time('prime creation');\n        var store = [], i, j;\n        for (i = 2; i <= max; ++i) {\n            if (!store[i]) {\n                primesFwd.push(i);\n                for (j = i << 1; j <= max; j += i) {\n                    store[j] = true;\n                }\n            }\n        }\n        // this.primes = primesFwd.reverse();\n        this.primes = primesFwd;\n        console.timeEnd('prime creation');\n        mylog(\"primes length: \" + this.primes.length);\n        return this.primes;\n    }\n\n    static convertMillis( milliseconds ) {\n        let day, hour, minute, seconds;\n        const showWith0 = value => (value < 10 ? `0${value}` : value);\n        seconds = Math.floor(milliseconds / 1000);\n        minute = Math.floor(seconds / 60);\n        seconds = seconds % 60;\n        hour = Math.floor(minute / 60);\n        minute = minute % 60;\n        day = Math.floor(hour / 24);\n        hour = hour % 24;\n        return {\n            days: showWith0(day),\n            hours: showWith0(hour),\n            minutes: showWith0(minute),\n            seconds: showWith0(seconds)\n        };\n    }\n\n}","import React from 'react';\nimport ReactDOM from 'react-dom'\nimport update from 'immutability-helper';\n// import styled from 'styled-components';\nimport { Motion, spring } from 'react-motion';\nimport ComputeFunc from './ComputeFunc';\nimport HelperConst from './HelperConst';\nimport './styles/fonts.css';\nconst Decimal = require('decimal.js');\n// const mylog = HelperConst.DebugLog;\n\n\nexport default class Business extends React.Component {\n\n    static overlayCt = 0;\n\n    static computeNextPayoutValue(bus, userSettings, buyNum) {\n        const nextOwned = userSettings.busStats[bus.id].owned + buyNum;\n        const num25s = Math.floor(nextOwned / 25);\n        // 25, 50, 75, 100, 200, ...\n        const mult25 = num25s > 3 ? 3 : num25s;\n        const mult100 = Math.floor(nextOwned / 100);\n        const prestigeMultiplier = userSettings.prestige.num.times(userSettings.prestige.val).div(100).plus(1);\n        let revenue = new Decimal(\n            bus.incomeBase\n                .times(nextOwned)\n                .times(Math.pow(2, mult25))\n                .times(Math.pow(4, mult100))\n                .times(userSettings.busStats[bus.id].payoutAdj)\n                .times(prestigeMultiplier)\n        );\n        return revenue;\n    }\n\n    static computeEarningPerSec(item, userSettings, concentrate) {\n        return this.computeNextPayoutValue(item, userSettings, 0).div(userSettings.busStats[item.id].timeAdj)\n            .times(concentrate > 0 ? 2 : 1);\n    }\n    \n    static computeTotalEarningPerSec(items, userSettings, concentrate) {\n        let revenue = new Decimal(0);\n        items.forEach((item) => {\n            revenue = revenue.plus(this.computeEarningPerSec(item, userSettings, concentrate));\n        });\n        return revenue;\n    }\n\n    static getPayout(bus, userSettings) {\n        return this.computeNextPayoutValue(bus, userSettings, 0).times(bus.payout);\n    }\n\n    static getAllPayouts(items, userSettings) {\n        let revenue = new Decimal(0);\n        items.forEach((item) => {\n            revenue = revenue.plus(this.getPayout(item, userSettings));\n        });\n        return revenue;\n    }\n\n\n    static applyMultiplier(bus, mult) {\n        return update(bus, {\n            upgradeMult: { $set: bus.upgradeMult * mult },\n        })\n    }\n\n    static getAdjustedTimeBase(bus, milestoneIdx) {\n        if (milestoneIdx >= 0) {\n            return bus.timeBase / Math.pow(2, milestoneIdx);\n        }\n        return bus.timeBase;\n    }\n\n    static getPosition(reactRef) {\n        return ReactDOM\n            .findDOMNode(reactRef.current)\n            .getBoundingClientRect();\n    }\n\n    getDomRef(name) {\n        const idx = this.props.domRefs.findIndex(ref => ref.name === name);\n        if (idx < 0) return undefined;\n        const ref = this.props.domRefs[idx].domRef;\n        return ref;\n    }\n\n    genOverlays(bus) {\n        let textClass = \"overlay-text \";\n        return (\n            bus.overlays.map((o, idx) => {\n                // mylog(\"showing overlay for:\", bus.name);\n                let ovClass = textClass;\n                const domLeft = parseInt(this.getDomRef(bus.name).current.offsetLeft, 10);\n                const domTop = parseInt(this.getDomRef(bus.name).current.offsetTop, 10);\n                // mylog(\"domLeft:\", domLeft, \" domTop:\", domTop);\n                let curLeft = domLeft + 80;\n                let curTop = domTop - 15;\n                if (o.counter > o.expire) {\n                    ovClass += \"expired \";\n                }\n                let topChg = 0;\n                let leftChg = 0;\n                switch (o.ovType) {\n                    case \"ownedBonus\":\n                        leftChg = 100;\n                        break;\n                    default:\n                        topChg = -40;\n                        break;\n                }\n                return (\n                    <Motion key={\"overlay-text \" + o.id}\n                        defaultStyle={{\n                            top: curTop,\n                            left: curLeft,\n                            opacity: 1,\n                        }}\n                        style={{\n                            top: spring(curTop + topChg + o.yTarget),\n                            left: spring(curLeft + leftChg + o.xTarget),\n                            opacity: spring(0, { stiffness: 15, damping: 14 }),\n                        }}\n                    >\n\n                        {style => (\n                            <div\n                                key={\"overlay-text \" + o.id}\n                                className={ovClass + \"rainbow_text_animated \"}\n                                style={{\n                                    top: style.top,\n                                    left: style.left,\n                                    opacity: style.opacity,\n                                }} >{o.text}</div>\n                        )}\n\n                    </Motion>\n\n\n                );\n\n            })\n        )\n    }\n\n\n    render() {\n        const sources = this.props.businesses.reduce((result, item) => {\n            if (this.props.userSettings.busStats[item.id].revealed) {\n                result.push(item);\n            }\n            return result;\n        }, []);\n\n        const totalEarningPerSec = Business.computeTotalEarningPerSec(this.props.businesses, this.props.userSettings, this.props.concentrate);\n\n\n        const rows = sources.map((item) => {\n            const b = this.props.userSettings.busStats[item.id];\n            const n = item.name;\n            const myCost = ComputeFunc.getCost(item, this.props.userSettings.busStats[item.id], this.props.purchaseAmt, this.props.userSettings.money);\n            // mylog(myCost);\n            const nextPayout = Business.computeNextPayoutValue(item, this.props.userSettings, myCost.num);\n\n            const buyPct = ComputeFunc.buyPct(myCost.cost, this.props.userSettings.money);\n            const buyPctStyle = { width: buyPct + '%' };\n            const earnPct = ComputeFunc.earnPct(item, b.timeAdj);\n            const earnPctStyle = { width: earnPct + '%' };\n\n            let bgClass = \"money \";\n            let buttonClass = \"\";\n            let costClass = \"\";\n            let buttonDisabled = false;\n            if (this.props.userSettings.money.gte(myCost.cost)) {\n                buttonClass = \"business-buy canAfford \";\n                costClass = \"cost-wrapper canAfford \";\n            } else {\n                buttonClass = \"business-buy cannotAfford \";\n                buttonDisabled = true;\n                costClass = \"cost-wrapper cannotAfford \";\n            }\n\n            const myEarningPerSec = Business.computeEarningPerSec(item, this.props.userSettings, this.props.concentrate);\n            let curPayout = Business.computeNextPayoutValue(item, this.props.userSettings, 0);\n            const myPayout = curPayout.gt(0) ? curPayout : nextPayout;\n            const myEarningPct = ComputeFunc.getEarningPct(myEarningPerSec, totalEarningPerSec);\n\n\n\n            const overlayItems = this.genOverlays(item);\n            // mylog(\"overlayItems:\",overlayItems);\n\n            return (\n                <div key={item.id + \"business\"} className={\"business \" + bgClass} ref={this.getDomRef(n)} >\n                    <div className=\"overlays-wrapper\">\n                        {overlayItems}\n                    </div>\n                    <div className={\"business-buy-progress \" + bgClass}>\n                        <div className={\"business-buy-progress-pct \" + bgClass} style={buyPctStyle}>\n                            <span ></span>\n                        </div>\n                    </div>\n                    <div className={\"business-earn-progress \" + bgClass}>\n                        <div className={\"business-earn-progress-pct \" + bgClass} style={earnPctStyle}>\n                            <span ></span>\n                        </div>\n                    </div>\n                    <button\n                        key={item.id + \"button\"}\n                        className={buttonClass + bgClass}\n                        onClick={() => this.props.onClick(item)}\n                        disabled={buttonDisabled}>\n                        <span\n                            className=\"buyMultiple\">{myCost.num}{HelperConst.multiplySymbolSpan()}\n                        </span> {n}\n                    </button>\n                    <div key={item.id + \"owned\"} className=\"business-owned\">{HelperConst.showInt(b.owned)}</div>\n\n                    <div key={item.id + \"cost-wrapper\"} className={costClass}>\n                        <div key={item.id + \"cost-money\"} className=\"business-cost-money\">{HelperConst.moneySymbolSpan()}{HelperConst.showNum(myCost.cost)}</div>\n                    </div>\n\n                    <div key={item.id + \"earning-wrapper\"} className=\"earning-wrapper\">\n                        <div key={item.id + \"revenue-total\"} className=\"business-revenue-total\">+{HelperConst.moneySymbolSpan()}{HelperConst.showNum(myPayout)}</div>\n                    </div>\n\n                    <div key={item.id + \"earning-pct-wrapper\"} className=\"earning-pct-wrapper\">\n                        <div key={item.id + \"earning-pct\"} className=\"earning-pct\">{myEarningPct}%</div>\n                    </div>\n                </div>\n            );\n        });\n\n\n        return (\n            <div className=\"business-container\">\n                {rows}\n            </div>\n        )\n    };\n};\n\n","import React from 'react';\n// import ComputeFunc from './ComputeFunc';\nimport HelperConst from './HelperConst';\nimport './styles/fonts.css';\nimport './styles/neon.scss';\nimport Business from './Business';\n// const mylog = HelperConst.DebugLog;\nconst Decimal = require('decimal.js');\n\nexport default class Income extends React.Component {\n\n\n    render() {\n\n        const revenue = Business.computeTotalEarningPerSec(this.props.businesses, this.props.userSettings, this.props.concentrate);\n        // const learning = ComputeFunc.computeTotalEarningPerSec(this.props.probes, this.props.prestige);\n        const learning = new Decimal(0);\n\n        let rowsLeft = [];\n        let rowsRight = [];\n\n        if (this.props.userSettings.prestige.num.gt(0) || this.props.userSettings.prestigeNext.gt(0)) {\n\n            rowsRight.push(\n                <React.Fragment key=\"prestige-header\">\n                    <div className=\"prestige-header\">\n                        Prestige:\n                    </div>\n                    <div className=\"prestige-units\">\n                        {HelperConst.prestigeSymbolSpan()}{HelperConst.showInt(this.props.userSettings.prestige.num)}\n                    </div>\n                    <div className=\"prestige-earning\">\n                        (+ {HelperConst.prestigeSymbolSpan()}{HelperConst.showInt(this.props.userSettings.prestigeNext)})\n                    </div>\n                </React.Fragment>\n            )\n        }\n\n        // space view activated\n        if (this.props.userSettings.featureEnabled[1000] && this.props.userSettings.probe.value.gt(0)) {\n            rowsLeft.push(\n                <React.Fragment key=\"learning-header\">\n                    <div className=\"learning-header\">\n                        Knowledge:\n                    </div>\n                    <div className=\"learning-knowledge\">\n                        {HelperConst.knowledgeSymbolSpan()}{HelperConst.showNum(this.props.userSettings.knowledge)}\n                    </div>\n                    <div className=\"learning-learning\">\n                        (+ {HelperConst.knowledgeSymbolSpan()}{HelperConst.showNum(learning)}/s)\n                    </div>\n                </React.Fragment>\n            )\n            rowsRight.push(\n                <React.Fragment key=\"probe-header\">\n                    <div className=\"probe-header\">\n                        Distance:\n                    </div>\n                    <div className=\"probe-distance\">\n                        {HelperConst.showNum(this.props.userSettings.probe.distance)} km\n                    </div>\n                    <div className=\"probe-rate\">\n                        +{HelperConst.showNum(this.props.userSettings.probe.getDistPerSec())} km/s\n                    </div>\n                </React.Fragment>\n            )\n        }\n\n\n        return (\n            <div className=\"header-wrapper\">\n\n                <div className=\"income\">\n\n                    <div className=\"income-header\">\n                        Money:\n                    </div>\n                    <div className=\"income-money\">\n                        {HelperConst.moneySymbolSpan()}{HelperConst.showNum(this.props.userSettings.money)}\n                    </div>\n                    <div className=\"income-earning\">\n                        (+ {HelperConst.moneySymbolSpan()}{HelperConst.showNum(revenue)}/s)\n                    </div>\n\n\n                    {rowsLeft}\n\n                </div>\n\n                <div className=\"title-wrapper\">\n                    <div className=\"von\">von</div>\n                    <div className=\"text-effect\">\n                        <h1 className=\"neon\" data-text=\"NEUMANN\">NEUMANN</h1>\n                        <div className=\"gradient\"></div>\n                        <div className=\"spotlight\"></div>\n                    </div>\n                </div>\n\n                <div className=\"prestige\">\n\n                    {rowsRight}\n\n                </div>\n\n            </div>\n        );\n\n    }\n\n\n}\n\n\n","\n// import HelperConst from './HelperConst';\n// const mylog = HelperConst.DebugLog;\nconst Decimal = require('decimal.js');\n\nexport default class Probe {\n    constructor(value, pSpeed, pQuality, pCombat) {\n        this.value = value;\n        this.speed = pSpeed;\n        this.quality = pQuality;\n        this.combat = pCombat;\n        this.number = new Decimal(0);\n        this.qualityLoss = new Decimal(0);\n        this.combatLoss = new Decimal(0);\n        this.distance = new Decimal(0);\n    }\n\n    increment(num) {\n        this.number = this.number.plus(num);\n    }\n    decrement(num) {\n        if (this.number.lt(num)) num=this.number;\n        this.number = this.number.minus(num);\n        this.losses = this.losses.plus(num);\n    }\n\n    goFarther(dist) {\n        this.distance = this.distance.plus(dist);\n    }\n\n    getDistPerSec() {\n        // return this.value.times(this.speed).ln(3);\n        if (this.distPerSec) { return this.distPerSec; }\n        const speedQ = Math.pow((1+((this.speed-5)/100)),2);\n        this.distPerSec = this.value.div(\"1e3\").sqrt().times(speedQ).div(2);\n        return this.distPerSec;\n    }\n\n    getDistPerTick(timeMultiplier) {\n        return this.getDistPerSec().times(timeMultiplier);\n    }\n\n    getLosses() {\n        return Decimal(0);\n    }\n\n    update(timeMultiplier) {\n        this.goFarther(this.getDistPerTick(timeMultiplier));\n    }\n\n}","// import React from 'react';\nconst Decimal = require('decimal.js');\n\nexport default function BusinessInit() {\n\n    return ([\n        {\n            id: 0,\n            name: \"Mental Math\",\n            desc: \"desc1\",\n            owned: 1,\n            incomeType: \"money\",\n            incomeBase: new Decimal(1),\n            costType: \"money\",\n            costBase: new Decimal(4.3859),\n            costCoef: 1.13,\n            timeBase: 1,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(0),\n            overlays: [],\n        }, {\n            id: 1,\n            name: \"Research Review\",\n            desc: \"desc2\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(40),\n            costType: \"money\",\n            costBase: new Decimal(120),\n            costCoef: 1.14,\n            timeBase: 2,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(40),\n            overlays: [],\n        }, {\n            id: 2,\n            name: \"Publish Articles\",\n            desc: \"desc2\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(160),\n            costType: \"money\",\n            costBase: new Decimal(1400),\n            costCoef: 1.14,\n            timeBase: 4,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(460),\n            overlays: [],\n        }, {\n            id: 3,\n            name: \"University Lectures\",\n            desc: \"desc1\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(777),\n            costType: \"money\",\n            costBase: new Decimal(\"28e3\"),\n            costCoef: 1.14,\n            timeBase: 8,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(\"9.8e3\"),\n            overlays: [],\n        }, {\n            id: 4,\n            name: \"Author Books\",\n            desc: \"desc2\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(3902),\n            costType: \"money\",\n            costBase: new Decimal(\"562e3\"),\n            costCoef: 1.14,\n            timeBase: 12,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(\"187e3\"),\n            overlays: [],\n        }, {\n            id: 5,\n            name: \"Game Theory\",\n            desc: \"desc2\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(19400),\n            costType: \"money\",\n            costBase: new Decimal(\"11.2e6\"),\n            costCoef: 1.14,\n            timeBase: 20,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(\"3.7e6\"),\n            overlays: [],\n        }, {\n            id: 6,\n            name: \"Self-Replication Study\",\n            desc: \"desc2\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(\"97.7e3\"),\n            costType: \"money\",\n            costBase: new Decimal(\"224e6\"),\n            costCoef: 1.14,\n            timeBase: 45,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(\"74.7e6\"),\n            overlays: [],\n        }, {\n            id: 7,\n            name: \"Manhattan Project\",\n            desc: \"desc1\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(\"487e3\"),\n            costType: \"money\",\n            costBase: new Decimal(\"4.49e9\"),\n            costCoef: 1.14,\n            timeBase: 120,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(\"1.5e9\"),\n            overlays: [],\n        }, {\n            id: 8,\n            name: \"Research Laboratory\",\n            desc: \"desc2\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(\"2.45e6\"),\n            costType: \"money\",\n            costBase: new Decimal(\"90.18e9\"),\n            costCoef: 1.14,\n            timeBase: 450,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(\"30e9\"),\n            overlays: [],\n        }, {\n            id: 9,\n            name: \"Government Advisory\",\n            desc: \"desc2\",\n            owned: 0,\n            incomeType: \"money\",\n            incomeBase: new Decimal(\"16.4e6\"),\n            costType: \"money\",\n            costBase: new Decimal(\"1.811e12\"),\n            costCoef: 1.12,\n            timeBase: 900,\n            timeCounter: 0,\n            payout: 0,\n            initialVisible: new Decimal(\"905e9\"),\n            overlays: [],\n        }\n    ]);\n\n}","// import { Decimal } from 'decimal.js';\nconst Decimal = require('decimal.js');\n\nexport default function UpgradeInit() {\n\n    return ([\n        {\n            id: 0,\n            name: \"Good Night's Rest\",\n            watchType: \"money\",\n            watchValue: new Decimal(\"4500\"),\n            costType: \"money\",\n            costValue: new Decimal(\"11e3\"),\n            // costValue: new Decimal(\"50\"),\n            rewardType: \"upgradeMult\",\n            rewardTarget: 0,\n            rewardValue: 2,\n        }, {\n            id: 1,\n            name: \"Strong Coffee\",\n            watchType: \"money\",\n            watchValue: new Decimal(\"55e3\"),\n            costType: \"money\",\n            costValue: new Decimal(\"75e3\"),\n            rewardType: \"upgradeMult\",\n            rewardTarget: 0,\n            rewardValue: 2,\n        }, {\n            id: 1000,\n            name: \"New Technology\",\n            watchType: \"businessOwned\",\n            watchTarget: 0,\n            watchValue: 1,\n            costType: \"money\",\n            costValue: new Decimal(\"100\"),\n            rewardType: \"enableFeature\",\n            rewardTarget: \"Satellite\",\n        }, {\n            id: 1001,\n            name: \"New Technology\",\n            watchType: \"businessOwned\",\n            watchTarget: 0,\n            watchValue: 1,\n            costType: \"money\",\n            costValue: new Decimal(\"100\"),\n            rewardType: \"enableFeature\",\n            rewardTarget: \"Self-Replication Machinery\",\n        }, {\n            id: 1002,\n            name: \"New Technology\",\n            watchType: \"businessOwned\",\n            watchTarget: 6,\n            watchValue: 100,\n            costType: \"money\",\n            costValue: new Decimal(\"1e12\"),\n            rewardType: \"enableFeature\",\n            rewardTarget: \"Nano Technology\",\n        }, {\n            id: 1003,\n            name: \"New Technology\",\n            watchType: \"businessOwned\",\n            watchTarget: 0,\n            watchValue: 1,\n            costType: \"money\",\n            costValue: new Decimal(\"100\"),\n            rewardType: \"enableFeature\",\n            rewardTarget: \"Quality Control\",\n        }, {\n            id: 1004,\n            name: \"New Technology\",\n            watchType: \"businessOwned\",\n            watchTarget: 0,\n            watchValue: 1,\n            costType: \"money\",\n            costValue: new Decimal(\"100\"),\n            rewardType: \"enableFeature\",\n            rewardTarget: \"Combat\",\n        }, {\n            id: 1100,\n            name: \"New Ability\",\n            watchType: \"businessOwned\",\n            watchTarget: 0,\n            watchValue: 1,\n            costType: \"money\",\n            costValue: new Decimal(\"100\"),\n            rewardType: \"enableFeature\",\n            rewardTarget: \"Probe Autobuy\",\n        }\n\n    ]);\n}","import React from 'react';\nimport BusinessInit from './BusinessInit';\n// import ProbeInit from './ProbeInit';\nimport UpgradeInit from './UpgradeInit';\nimport Probe from '../Probe';\nconst Decimal = require('decimal.js');\n\nexport default class NeumannInit extends React.Component {\n\n    static freshState = () => ({\n        businesses: BusinessInit(),\n        upgrades: UpgradeInit(),\n        announcements: [],\n        modals: [],\n        version: \"0.0.1\",\n        concentrate: 0,\n        concentrateClass: \"concIdle\",\n    })\n\n    static userSettings = () => ({\n        money: new Decimal(0),\n        knowledge: new Decimal(0),\n        probe: new Probe(new Decimal(0), 0, 0, 0),\n        prestige: { num: new Decimal(0), val: 5 },\n        prestigeNext: new Decimal(0),\n        lifetimeEarnings: new Decimal(0),\n        lifetimeLearning: new Decimal(0),\n        curMaxMoney: new Decimal(0),\n        curTotalClicks: 0,\n        buyMilestone: 0,\n        busStats: {\n            0: { owned: 1, revealed: false, timeAdj: -1, payoutAdj: 1, },\n        },\n        upgStats: {},\n        featureEnabled: {},\n        toggles: {\n            overlays: true,\n        },\n\n    })\n\n}","import React from 'react';\nimport HelperConst from './HelperConst';\nimport ComputeFunc from './ComputeFunc';\nimport './styles/fonts.css';\nimport ScrollBar from 'react-scrollbars-custom';\nconst mylog = HelperConst.DebugLog;\n\nexport default class Upgrades extends React.Component {\n\n    componentDidMount() {\n        mylog(\"upgrades didmount\");\n    }\n\n    componentWillUnmount() {\n        mylog(\"upgrades willunmount\");\n    }\n\n    render() {\n        const sources = this.props.upgrades.reduce((result, item) => {\n            let u = this.props.userSettings.upgStats[item.id];\n            if (!u.purchased && u.revealed) {\n                result.push(item);\n            }\n            return result;\n        }, []);\n        // mylog(\"sources:\",sources);\n\n        const rows = sources.map(item => {\n            const u = this.props.userSettings.upgStats[item.id];\n            if (u.purchased || !u.revealed) { return \"\"; };\n\n            let n = item.name;\n            let buyClass = \"\";\n            let buttonDisabled = true;\n\n            let buyPct = 0;\n            let bgClass = \"\";\n            let costSymbol = \"\";\n\n            let rewardInfo;\n            let clickAction = this.props.onClick;\n\n            if (item.rewardType === \"enableFeature\") {\n                bgClass = \"feature \";\n            } else if (item.costType === \"knowledge\") {\n                bgClass = \"knowledge \";\n            } else {\n                bgClass = \"money \";\n            }\n\n            if (item.costType === \"money\") {\n                costSymbol = HelperConst.moneySymbolSpan();\n                buyPct = ComputeFunc.buyPct(item.costValue, this.props.userSettings.money);\n\n                if (this.props.userSettings.money.gte(item.costValue)) {\n                    buyClass += \"canAfford \";\n                    buttonDisabled = false;\n                } else {\n                    buyClass += \"cannotAfford \";\n                }\n            } else {\n                costSymbol = HelperConst.knowledgeSymbolSpan();\n                buyPct = ComputeFunc.buyPct(item.costValue, this.props.userSettings.knowledge);\n\n                if (this.props.userSettings.knowledge.gte(item.costValue)) {\n                    buyClass += \"canAfford \";\n                    buttonDisabled = false;\n                } else {\n                    buyClass += \"cannotAfford \";\n                }\n            }\n\n\n\n            switch (item.rewardType) {\n                case \"enableFeature\":\n                    rewardInfo = item.rewardTarget;\n                    clickAction = this.props.enableFeature;\n                    break;\n                default:\n                    rewardInfo = this.props.businesses[item.rewardTarget].name + \" x\" + item.rewardValue;\n                    break;\n            }\n\n            let bgAnim = buyPct < 100 ? \"upgAnim \" : \"\";\n            const buyPctStyle = { width: buyPct + '%' }\n\n            return (\n                <div key={item.id + \"upgrade\"} className={\"upgrade \" + bgClass} >\n                    <div className={\"upgrade-buy-progress \" + bgClass}>\n                        <div className={\"upgrade-buy-progress-pct \" + bgClass + bgAnim} style={buyPctStyle}>\n                            <span ></span>\n                        </div>\n                    </div>\n                    <button\n                        key={item.id + \"button\"}\n                        className={\"upgrade-buy \" + buyClass + bgClass}\n                        onClick={() => clickAction(item)}\n                        disabled={buttonDisabled}>\n                        {n}\n                    </button>\n                    <div key={item.id + \"upgrade-reward\"} className=\"upgrade-reward\">\n                        {rewardInfo}\n                    </div>\n                    <div key={item.id + \"upgrade-cost-wrapper\"} className={\"upgrade-cost-wrapper \" + buyClass + bgClass} >\n                        {costSymbol}{HelperConst.showNum(item.costValue)}\n                    </div>\n                </div >\n            )\n\n        });\n\n        return (\n            <ScrollBar permanentTrackY={true} className=\"upgrade-container\" >\n                {rows}\n            </ScrollBar>\n        )\n\n    }\n\n}","import React from 'react';\n// import ComputeFunc from './ComputeFunc';\n// import HelperConst from './HelperConst';\nimport './styles/fonts.css';\nimport './styles/colors.scss';\n// import HelperConst from './HelperConst';\n// const mylog = HelperConst.DebugLog;\n\n\nexport default class Announce extends React.Component {\n\n    render() {\n        const rows = this.props.announcements.map((item, index) => {\n            const annClass = (item.ack) ? \"announce-fadeout\" : \"\"\n            return (\n                <div\n                    className={\"announcement \" + annClass}\n                    key={item.id}\n                    onClick={() => this.props.onClick(item)}                >\n                    <span className=\"announce-text\">{item.text}</span>\n                </div>\n            )\n        })\n\n        return (\n            <div className=\"announce-container\" >\n                {rows}\n            </div>\n        )\n    }\n\n}","import React from 'react';\nimport Slider from 'rc-slider';\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst MyRange = createSliderWithTooltip(Slider.Range);\nconst MySlider = createSliderWithTooltip(Slider);\n\nexport default class Sliders {\n\n    static sliderMarks = {\n        0: { \n            style: { \n                'fontWeight': 'bold', \n                color: '#ddd',\n            },\n            label: '0',\n        },\n        25: { \n            style: { \n                'fontWeight': 'bold',  \n                color: '#ddd',\n            },\n            label: '25%',\n        },\n        50: { \n            style: { \n                'fontWeight': 'bold',  \n                color: '#ddd',\n            },\n            label: '50%',\n        },\n        75: { \n            style: { \n                'fontWeight': 'bold',  \n                color: '#ddd',\n            },\n            label: '75%',\n        },\n        100: { \n            style: { \n                'fontWeight': 'bold',  \n                color: '#ddd',\n            },\n            label: '100%'\n        },\n    };\n\n    static getRangeValues(n) {\n        if (n === 1) {\n            return ({\n                probeSpendPct: 25,\n                rangeCt: 1,\n                distribRange: [0, 100],\n            })\n        } else if (n === 2) {\n            return ({\n                probeSpendPct: 25,\n                rangeCt: 2,\n                distribRange: [0, 50, 100],\n                handleStyle: [\n                    { backgroundColor: 'gold', border: '0', height: '0px', width: '0px', },\n                    { backgroundColor: 'gold', border: '0', },\n                    { backgroundColor: 'cyan', border: '0', height: '0px', width: '0px', },\n                ],\n                trackStyle: [\n                    { backgroundColor: 'gold' },\n                    { backgroundColor: 'cyan' },\n                ],\n                railStyle: { backgroundColor: 'blue' },\n            })\n        } else if (n === 3) {\n            return ({\n                probeSpendPct: 25,\n                rangeCt: 3,\n                distribRange: [0, 33, 66, 100],\n                handleStyle: [\n                    { backgroundColor: 'gold', border: '0', height: '0px', width: '0px', },\n                    { backgroundColor: 'gold', border: '0', },\n                    { backgroundColor: 'cyan', border: '0', },\n                    { backgroundColor: 'red', border: '0', height: '0px', width: '0px', },\n                ],\n                trackStyle: [\n                    { backgroundColor: 'gold' },\n                    { backgroundColor: 'cyan' },\n                    { backgroundColor: 'red' },\n                ],\n                railStyle: { backgroundColor: 'red' },\n            })\n        }\n    }\n\n    static getSlider(props, sliderCallback) {\n        return (\n            <MySlider\n                // count={1}\n                min={5}\n                max={100}\n                value={props.probeSpendPct}\n                marks={this.sliderMarks}\n                step={5}\n                onChange={sliderCallback}\n                defaultValue={5}\n                trackStyle={[\n                    { backgroundColor: '#1A8A09' },\n                    { backgroundColor: '#555' },\n                ]}\n                handleStyle={[\n                    // { backgroundColor: '#1A8A09', border: '0', },\n                    { backgroundColor: '#1A8A09', border: '0', },\n                    { backgroundColor: '#555', border: '0', },\n                ]}\n                dotStyle={{\n                    backgroundColor: '#bbb',\n                    border: '0',\n                    width: '4px',\n                }}\n                activeDotStyle={{\n                    backgroundColor: '#1A8A09',\n                    border: '0',\n                    width: '4px',\n                }}\n                allowCross={false}\n                // pushable={true}\n                tipFormatter={value => value + \"%\"}\n                tipProps={{ placement: 'bottom' }}\n            />\n        )\n    }\n\n    static getRange(props, rangeCallback) {\n        return (\n            <MyRange\n                count={props.rangeSettings.rangeCt}\n                min={0}\n                max={100}\n                step={2}\n                marks={this.sliderMarks}\n                onChange={rangeCallback}\n                defaultValue={props.rangeSettings.distribRange}\n                value={props.rangeSettings.distribRange}\n                trackStyle={props.rangeSettings.trackStyle}\n                handleStyle={props.rangeSettings.handleStyle}\n                railStyle={props.rangeSettings.railStyle}\n                dotStyle={{\n                    backgroundColor: '#bbb',\n                    border: '0',\n                    width: '4px',\n                }}\n                allowCross={false}\n                pushable={false}\n                tipFormatter={value => value + \"%\"}\n                tipProps={{ placement: 'bottom' }}\n            />\n        )\n    }\n\n}","import React from 'react';\n\nimport HelperConst from './HelperConst';\n// const mylog = HelperConst.DebugLog;\n\nexport default class Settings extends React.Component {\n\n    render() {\n        return (\n            <div id=\"settings\">\n                \n\n                <div className=\"toggleHolder\">\n                <div className=\"toggleLabel\">Overlays</div>\n                {HelperConst.onoffswitch(\"overlays\",this.props.toggles.overlays, this.props.toggleOverlay)}\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\n\n// import HelperConst from './HelperConst';\n// const mylog = HelperConst.DebugLog;\n\nexport default class Prestige extends React.Component {\n\n    render() {\n        return (\n            <div id=\"prestige\">\n                TODO\n            </div>\n        )\n    }\n}","import React from 'react';\n// import ReactDOM from 'react-dom'\nimport SecureLS from 'secure-ls';\nimport update from 'immutability-helper';\nimport Modal from 'react-modal';\nimport Dropdown from 'react-dropdown';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\n// import Slider from 'rc-slider';\n\n// import { compress as lzStringCompress, decompress as lzStringDecompress } from 'lz-string';\n// import { compress as lzStringCompress } from 'lz-string';\n\nimport './styles/fonts.css';\nimport './styles/index.scss';\nimport './styles/dropdown.scss';\nimport './styles/modal.scss';\nimport './styles/effects.scss';\nimport './styles/space.scss';\nimport 'rc-slider/assets/index.css';\n\nimport Space from './Space';\nimport Income from './Income';\nimport Business from './Business.js';\nimport Probe from './Probe.js';\nimport NeumannInit from './objInit/NeumannInit';\nimport ComputeFunc from './ComputeFunc';\nimport HelperConst from './HelperConst';\nimport Upgrades from './Upgrades';\nimport Announce from './Announce';\nimport Sliders from './Sliders';\nimport Settings from './Settings';\nimport Prestige from './Prestige';\n\nconst Decimal = require('decimal.js');\nconst mylog = HelperConst.DebugLog;\n\n// =====================================================\nexport default class Neumann extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = { ...NeumannInit.freshState() };\n        this.state.helpModalIsOpen = false;\n\n        this.userSettings = { ...NeumannInit.userSettings() };\n\n        this.timerRunning = false;\n        this.state.pauseClass = \"sidebarButtons fancyButtons pause-button \";\n        this.timeInterval = 100;\n        this.timeMultiplier = this.timeInterval / 1000;\n        this.lastLoop = Date.now();\n\n\n        this.gameSavedHide = <div id=\"savegame\"></div>;\n        this.gameSavedNotify = <div id=\"savegame\" className=\"game-saved\">Game Saved</div>\n        this.gameSavedCountdown = 5;\n        this.gameSavedObj = {\n            content: this.gameSavedHide,\n            countdown: this.gameSavedCountdown,\n        };\n\n        this.announceCt = 0;\n        this.overlayCt = 0;\n        this.modalCt = 0;\n\n        this.gameIntervalId = null;\n        this.prestigeIntervalId = null;\n        this.gameSaveIntervalId = null;\n\n        this.domRefs = [];\n        this.purchaseAmt = \"1\";\n        this.tabIndex = 0;\n\n\n        // this.probe = new Probe(new Decimal(0), 0, 0, 0);\n        this.zoomLevel = 0;\n        this.zoomName = Space.spaceZoomLevelNames[0];\n        this.mapDistance = Space.spaceZoomLevels[0];\n\n        this.sliderInfo = {\n            rangeSettings: Sliders.getRangeValues(1),\n            probePcts: [50, 50, 0],\n            probeSpendPct: 25,\n        }\n\n        // this._business = React.createRef();\n        this.populateBusDomRefs = this.populateInitVals.bind(this);\n        this.restart = this.restart.bind(this);\n        this.resetAll = this.resetAll.bind(this);\n        this.pause = this.pause.bind(this);\n        this.resume = this.resume.bind(this);\n        this.loadGame = this.loadGame.bind(this);\n        this.saveGame = this.saveGame.bind(this);\n        this.decrementSavedGameObj = this.decrementSavedGameObj.bind(this);\n        this.prestige = this.prestige.bind(this);\n        this.updatePrestigeEarned = this.updatePrestigeEarned.bind(this);\n        this.updateGame = this.updateGame.bind(this);\n        this.clickBusiness = this.clickBusiness.bind(this);\n        this.clickUpgrade = this.clickUpgrade.bind(this);\n        this.clickAnnouncement = this.clickAnnouncement.bind(this);\n        this.purchaseAmtDropDownHandler = this.purchaseAmtDropDownHandler.bind(this);\n        this.announce = this.announce.bind(this);\n        this.sliderChange = this.sliderChange.bind(this);\n        this.rangeChange = this.rangeChange.bind(this);\n        this.enableFeature = this.enableFeature.bind(this);\n        this.purchaseProbe = this.purchaseProbe.bind(this);\n        this.getSettingsTab = this.getSettingsTab.bind(this);\n        this.toggleOverlay = this.toggleOverlay.bind(this);\n        this.clickConcentrate = this.clickConcentrate.bind(this);\n        this.decrementConcentrate = this.updateConcentrate.bind(this);\n\n        this.openHelpModal = this.openHelpModal.bind(this);\n        this.closeHelpModal = this.closeHelpModal.bind(this);\n        this.afterOpenHelpModal = this.afterOpenHelpModal.bind(this);\n\n\n        /* cheats */\n        this.prestigeCheat = this.prestigeCheat.bind(this);\n        this.moneyCheat = this.moneyCheat.bind(this);\n        this.cheatPrestigeVal = \"1e9\";\n\n\n\n\n    }\n\n\n    componentDidMount() {\n        mylog(\"game didmount\");\n        this.resetAll();\n        this.loadGame(); // if exists\n\n        mylog(HelperConst.purchaseOptsSpecial);\n        mylog(Space.spaceZoomLevels.map(n => HelperConst.showInt(n)));\n        this.setState((state, props) => ({\n            isLoaded: true,\n        }));\n\n        Modal.setAppElement('#root');\n\n        mylog(\"init work done\");\n    }\n\n    componentWillUnmount() {\n        mylog(\"game willunmount\");\n        clearInterval(this.gameIntervalId);\n        clearInterval(this.prestigeIntervalId);\n        clearInterval(this.gameSaveIntervalId);\n    }\n\n    componentDidUpdate() {\n        // mylog(\"game didupdate\");\n\n    }\n\n    setTitle() {\n        document.title = \"NEUMANN $\"\n            + HelperConst.showNum(this.userSettings.money)\n            + \" \" + this.state.version;\n    }\n\n    populateInitVals() {\n        // update our userSettings for all businesses and upgrades\n        mylog(\"updating userSettings with bus and upg\");\n        this.state.businesses.forEach(item => {\n            if (!this.userSettings.busStats[item.id])\n                this.userSettings.busStats[item.id] = { owned: 0, revealed: false, timeAdj: -1, payoutAdj: 1, };\n            this.domRefs.push({ name: item.name, domRef: React.createRef() });\n        });\n        this.state.upgrades.forEach(item => {\n            if (!this.userSettings.upgStats[item.id])\n                this.userSettings.upgStats[item.id] = { purchased: false, revealed: false };\n        });\n        this.probeDivRef = React.createRef();\n\n        this.pulseRef = null;\n        this.centerEllipseRef = null;\n        this.innerEllipseRef = null;\n        this.outerEllipseRef = null;\n        this.centerPlanetRef = null;\n        mylog(\"populated domRefs:\", this.domRefs);\n    }\n\n    stopSaveGameInterval() {\n        if (this.gameSaveIntervalId) {\n            clearInterval(this.gameSaveIntervalId);\n            delete (this.gameSaveIntervalId)\n        }\n    }\n    startSaveGameInterval() {\n        if (!this.gameSaveIntervalId) {\n            this.gameSaveIntervalId = setInterval(this.saveGame, 30000);\n            mylog(\"game intervalId set\");\n        }\n        mylog(\"save intervalId:\", this.gameIntervalId);\n    }\n\n    resetAll() {\n        this.pause();\n        this.setState((state, props) => ({\n            ...NeumannInit.freshState()\n        }));\n        this.userSettings = { ...NeumannInit.userSettings() };\n        this.announceCt = 0;\n        this.modalCt = 0;\n        this.populateInitVals();\n        this.outerEllipseMoving = false;\n        this.pulseMoving = false;\n        this.zoomLevel = 0;\n        this.zoomName = Space.spaceZoomLevelNames[0];\n        this.mapDistance = Space.spaceZoomLevels[0];\n        this.resume();\n    }\n\n    restart() {\n        this.pause();\n        this.setState((state, props) => ({\n            ...NeumannInit.freshState()\n        }));\n        this.userSettings = { ...NeumannInit.userSettings() };\n        this.populateInitVals();\n        this.zoomLevel = 0;\n        this.zoomName = Space.spaceZoomLevelNames[0];\n        this.mapDistance = Space.spaceZoomLevels[0];\n        this.resume();\n    }\n\n    pause() {\n        this.timerRunning = false;\n        this.setState((state) => ({\n            pauseClass: \"sidebarButtons fancyButtons  pause-button lit\",\n        }));\n        if (this.gameIntervalId) {\n            clearInterval(this.gameIntervalId);\n            delete (this.gameIntervalId);\n        }\n        if (this.prestigeIntervalId) {\n            clearInterval(this.prestigeIntervalId);\n            delete (this.prestigeIntervalId)\n        }\n        this.stopSaveGameInterval();\n        mylog(\"set timeRunning to\", this.timerRunning);\n    }\n\n\n    resume() {\n        this.timerRunning = true;\n        this.setState((state) => ({\n            pauseClass: \"sidebarButtons fancyButtons  pause-button \",\n        }));\n        if (!this.gameIntervalId) {\n            this.gameIntervalId = setInterval(this.updateGame, this.timeInterval);\n        }\n        if (!this.prestigeIntervalId) {\n            this.prestigeIntervalId = setInterval(this.updatePrestigeEarned, 1000);\n        }\n        this.startSaveGameInterval();\n        this.lastLoop = Date.now();\n        mylog(\"set timeRunning to\", this.timerRunning);\n    }\n\n    loadGame() {\n        this.stopSaveGameInterval();\n        const ls = new SecureLS({ encodingType: 'aes' });\n        const saveString = ls.get('neumann_game_save');\n        if (!saveString) {\n            mylog(\"no save present\");\n            this.startSaveGameInterval();\n            return;\n        }\n        mylog(\"loaded:\", saveString);\n\n        const decimalKeys = [\n            \"money\",\n            \"knowledge\",\n            \"value\", \"number\", \"qualityLoss\", \"combatLoss\", \"distance\",\n            \"num\",\n            \"prestigeNext\",\n            \"lifetimeEarnings\", \"lifetimeLearning\",\n            \"curMaxMoney\"\n        ];\n        this.userSettings = JSON.parse(saveString, (key, value) => {\n            if (decimalKeys.includes(key)) {\n                mylog(\"  new decimal value for\", key);\n                return new Decimal(value);\n            }\n            return value;\n        });\n        // mylog(\"userSettings type:\",typeof(this.userSettings));\n        // mylog(\"userSettings:\", this.userSettings);\n        // mylog(\"probe:\", this.userSettings.probe);\n\n        const tempProbe = { ...this.userSettings.probe };\n        this.userSettings.probe = new Probe(\n            this.userSettings.probe.value,\n            this.userSettings.probe.speed,\n            this.userSettings.probe.quality,\n            this.userSettings.probe.combat,\n        );\n        // mylog(\"userSettings:\", this.userSettings);\n\n        // mylog(\"saveString probe:\",tempProbe);\n        this.userSettings.probe.number = tempProbe.number;\n        this.userSettings.probe.qualityLoss = tempProbe.qualityLoss;\n        this.userSettings.probe.combatLoss = tempProbe.combatLoss;\n        this.userSettings.probe.distance = tempProbe.distance;\n        mylog(\"userSettings:\", this.userSettings);\n\n        this.populateInitVals();\n\n        mylog(\"userSettings:\", this.userSettings);\n\n        const saveTime = ls.get('neumann_game_save_time');\n        if (saveTime) {\n            const deltaMillis = (Date.now() - saveTime);\n            const duration = ComputeFunc.convertMillis(deltaMillis);\n            mylog(\"you were gone for\",\n                duration.days + \"d\",\n                duration.hours + \"h\",\n                duration.minutes + \"m\",\n                duration.seconds + \"s\",\n            );\n\n            const gained = Business.computeTotalEarningPerSec(this.state.businesses, this.userSettings, this.state.concentrate)\n                .times(Math.floor(deltaMillis / 1000));\n            mylog(\"previous money:\", HelperConst.showNum(this.userSettings.money));\n            mylog(\"you gained $\", HelperConst.showNum(gained));\n            this.userSettings.money = this.userSettings.money.plus(gained);\n            mylog(\"now should have $\", HelperConst.showNum(this.userSettings.money));\n            mylog(\"probe distance:\", HelperConst.showNum(this.userSettings.probe.distance));\n        }\n\n        // this.lastLoop = Date.now();\n        this.startSaveGameInterval();\n        this.announce(\"game loaded\");\n    }\n\n    saveGame() {\n        // this.stopSaveGameInterval();\n        // mylog(\"userSettings:\", this.userSettings);\n        const ls = new SecureLS({ encodingType: 'aes' });\n        const saveStringText = JSON.stringify(this.userSettings);\n        // mylog(\"saveStringText:\", saveStringText);\n\n        ls.set('neumann_game_save_time', Date.now());\n        ls.set('neumann_game_save', saveStringText);\n\n        // this.announce(\"game saved\");\n        this.gameSavedObj = {\n            content: this.gameSavedNotify,\n            countdown: this.gameSavedCountdown,\n        };\n        // this.startSaveGameInterval();\n        mylog(\"game saved\");\n    }\n\n    decrementSavedGameObj() {\n        if (this.gameSavedObj.countdown > 0) {\n            this.gameSavedObj.countdown -= this.timeMultiplier;\n        }\n        if (this.gameSavedObj.countdown < 0) {\n            this.gameSavedObj.content = this.gameSavedHide;\n        }\n    }\n\n    updateConcentrate() {\n        let concButtonClass = this.state.concentrateClass;\n        if (this.state.concentrate > 0) {\n            mylog(\"concentrate countdown:\", this.state.concentrate);\n            concButtonClass = \"concActive\";\n            let newVal = this.state.concentrate - this.timeMultiplier;\n            if (newVal <= 0) {\n                newVal = -10;\n                concButtonClass = \"concCooldown\";\n            }\n            this.setState((state, props) => ({\n                concentrate: newVal,\n                concentrateClass: concButtonClass,\n            }))\n        }\n        if (this.state.concentrateClass === \"concCooldown\" && this.state.concentrate < 0) {\n            mylog(\"concentrate cooldown:\", this.state.concentrate);\n            let newVal = this.state.concentrate + this.timeMultiplier;\n            if (newVal >= 0) {\n                newVal = 0;\n                concButtonClass = \"concIdle\";\n            }\n            this.setState((state, props) => ({\n                concentrate: newVal,\n                concentrateClass: concButtonClass,\n            }))\n        }\n\n    }\n\n    updatePrestigeEarned() {\n        // const newPrestigeNext = ComputeFunc.calcPrestigeEarned(this.userSettings.lifetimeEarnings);\n        const newPrestigeNext = ComputeFunc.calcPrestigeEarnedFromMax(this.userSettings.curMaxMoney).minus(this.userSettings.prestige.num);\n        if (newPrestigeNext.gt(0) && !newPrestigeNext.eq(this.userSettings.prestigeNext)) {\n            // mylog(\"newPrestigeNext:\",newPrestigeNext.toFixed(9),\"prestigeNext:\",this.userSettings.prestigeNext.toFixed(9));\n            this.setState({\n                prestigeNext: newPrestigeNext,\n            })\n        }\n        // mylog(\"maxMoney:\",this.userSettings.curMaxMoney.toFixed());\n        // mylog(\"lifetime:\",this.userSettings.lifetimeEarnings.toFixed(),\"  newprestige:\",newPrestigeNext.toFixed());\n        // mylog(Decimal.sqrt(this.userSettings.lifetimeEarnings.div(Math.pow(10, 6))).times(150));\n    }\n\n    prestige() {\n        if (this.userSettings.prestigeNext.gt(0)) {\n            this.updatePrestigeEarned();\n            const newPrestige = this.userSettings.prestige.num.plus(this.userSettings.prestigeNext);\n            this.restart();\n            this.setState((state) => ({\n                prestige: { num: newPrestige, val: state.prestige.val },\n            }));\n        }\n    }\n\n    purchaseAmtDropDownHandler(amt) {\n        this.updatePurchaseAmt(amt.value);\n    }\n\n    updatePurchaseAmt(amt) {\n        mylog(\"received new purchaseAmt:\", amt);\n        if (HelperConst.purchaseOpts.indexOf(amt) !== -1 && this.purchaseAmt !== amt) {\n            this.purchaseAmt = amt;\n            mylog(\"new purchaseAmt:\", amt);\n        }\n        // mylog(this.state.businesses);\n        // mylog(this.state.businesses[0]);\n        // mylog(ComputeFunc.maxBuy(this.state.businesses[0], this.userSettings.money).max25);\n    }\n\n    prestigeCheat() {\n        mylog(\"CHEAT: adding\", this.cheatPrestigeVal, \"prestige\");\n        this.userSettings.prestige.num = this.userSettings.prestige.num.plus(this.cheatPrestigeVal);\n    }\n    moneyCheat() {\n        mylog(\"CHEAT: adding 50% money\");\n        this.userSettings.money = this.userSettings.money.times(1.5);\n    }\n\n\n    incrementBusinessCounters() {\n        let changed = false;\n        const newBusinesses = this.state.businesses.map(item => {\n            let b = this.userSettings.busStats[item.id];\n            // reset if new\n            if (b.timeAdj === -1) b.timeAdj = item.timeBase;\n\n            // concentrate\n            const addVal = this.state.concentrate > 0 ? 2 * this.timeMultiplier : this.timeMultiplier;\n\n            let newItem = { ...item };\n            if (b.owned === 0) {\n                if (b.revealed && item.timeCounter !== 0) {\n                    newItem.timeCounter = 0;\n                    changed = true;\n                    mylog(\"resetting \", item.name, \" to timeCounter \", newItem.timeCounter);\n                }\n            } else {\n                newItem.payout = 0;\n                newItem.timeCounter = newItem.timeCounter + addVal;\n                if (newItem.timeCounter >= b.timeAdj) {\n                    const numPayouts = Math.floor(newItem.timeCounter / b.timeAdj);\n                    newItem.payout = numPayouts;\n                    newItem.timeCounter = newItem.timeCounter % b.timeAdj;\n                }\n                changed = true;\n                // mylog(newItem.name, \" timeCounter:\", newItem.timeCounter, \" payout:\",newItem.payout);\n            }\n\n            // overlays\n            const activeOverlays = newItem.overlays.filter(o => o.counter < o.expire);\n            // const activeOverlays = newItem.overlays.filter(o => o.counter >= 0);\n\n            newItem.overlays = activeOverlays.map((o, i) => {\n                o.counter = o.counter + this.timeMultiplier;\n                // mylog(\"o.counter: #\" + i, o.counter);\n                return o;\n            })\n            // newItem.overlays.length > 0 && mylog(item.name,\"overlays:\", newItem.overlays.length);\n            return newItem;\n        });\n        if (changed) {\n            this.setState((state) => ({\n                businesses: newBusinesses,\n            }))\n        }\n    }\n\n    incrementProbeDistance() {\n        this.userSettings.probe.update(this.timeMultiplier);\n        // this.setState((state, props) => ({\n        //     probeDistance: state.probeDistance.plus(this.mapDistance.times(.001))\n        // }));\n        // const conv = ComputeFunc.convertDistanceToSpace(this.state.probeDistance);\n        // mylog(\"convertDistanceToSpace:\",conv.idx,conv.dist.toNumber());\n\n        const conv = Space.convertDistanceToSpace(this.userSettings.probe.distance);\n        this.mapDistance = conv.dist;\n        this.zoomLevel = conv.idx;\n        this.zoomName = conv.name;\n        // mylog(\"conv:\",conv);\n    }\n\n    incrementAnnouncementCounters() {\n        const valid = this.state.announcements.reduce((result, item) => {\n            if (!item.ack || (item.ack && item.counter < item.fadeout)) {\n                result.push(item);\n            }\n            return result;\n        }, []);\n        // mylog(\"valid:\", valid);\n        const newAnnouncements = valid.map(item => {\n            let newAnn = { ...item };\n            newAnn.counter += this.timeMultiplier;\n            if (newAnn.counter >= newAnn.expire) {\n                newAnn.ack = true;\n                newAnn.counter = 0;\n            }\n            return newAnn;\n        });\n        // mylog(\"newAnnouncements:\", newAnnouncements);\n        this.setState((state) => ({\n            announcements: newAnnouncements,\n        }))\n    }\n\n\n    clickBusiness(bus) {\n        mylog(\"business click \", bus.name);\n        const busCost = ComputeFunc.getCost(bus, this.userSettings.busStats[bus.id], this.purchaseAmt, this.userSettings.money);\n        this.userSettings.money = this.userSettings.money.minus(busCost.cost);\n        let b = this.userSettings.busStats[bus.id];\n\n        // add overlays\n        let newBusinesses = this.state.businesses.map(item => {\n            const newB = this.userSettings.busStats[item.id];\n            let newItem = { ...item };\n            if (newItem.id === bus.id) {\n                let bonusArr = [];\n                const ownedMilestones = ComputeFunc.getOwnedMilestonesAttained(newB.owned, newB.owned + busCost.num);\n                let busMult = 1;\n                ownedMilestones.forEach((milestone) => {\n                    busMult *= 2;\n                });\n                (busMult > 1) && bonusArr.push(this.genOverlayObj(\"X\" + busMult, \"ownedBonus\"));\n                newItem.overlays = this.genOverlayArr(item.overlays, \"+\" + busCost.num).concat(bonusArr);\n                mylog(\"adding\", busCost.num, \"to\", newItem.name);\n\n            }\n            return newItem;\n        });\n        /* for overlays */\n        this.setState((state, props) => ({\n            businesses: newBusinesses,\n        }));\n        b.owned += busCost.num;\n        mylog(bus.name, \"owned set to\", b.owned);\n\n\n        /* total buy milestones */\n        const curIdx = ComputeFunc.getTotalMilestoneIdx(this.userSettings.buyMilestone);\n        const newLowest = Object.keys(this.userSettings.busStats).reduce((min, bus) =>\n            this.userSettings.busStats[bus].owned < min ? this.userSettings.busStats[bus].owned : min,\n            Number.MAX_SAFE_INTEGER);\n        const newIdx = ComputeFunc.getTotalMilestoneIdx(newLowest);\n        // mylog(\"newIdx:\",newIdx,\" curIdx:\",curIdx);\n\n        /* apply time modifiers if new total milestone reached */\n        if (newIdx > curIdx) {\n            this.userSettings.buyMilestone = ComputeFunc.getTotalMilestone(newIdx);\n            mylog(\"new owned milestone:\", this.userSettings.buyMilestone);\n            // update adjusted cycle time\n            this.state.businesses.forEach((item, idx) => {\n                this.userSettings.busStats[item.id].timeAdj = Business.getAdjustedTimeBase(item, newIdx);\n                mylog(this.state.businesses[idx].name, \"timeAdjusted now\", this.userSettings.busStats[item.id].timeAdj);\n            });\n            ComputeFunc.getTotalMilestonesAttained(curIdx, newIdx).forEach((num) => {\n                this.announce(HelperConst.thumbsUpSymbol+\" All businesses at \" + num + \"! Speed Doubled!\");\n            })\n\n        }\n\n\n    }\n\n    enableFeature(feature) {\n        mylog(\"feature click \", feature.name);\n        this.userSettings.upgStats[feature.id].purchased = true;\n        this.userSettings.featureEnabled[feature.id] = true;\n        mylog(\"feature enabled:\", feature.rewardTarget);\n\n        switch (feature.id) {\n            case 1000:\n                this.announce(HelperConst.thumbsUpSymbol+\" SPAAAAACE!  The Final* Frontier!\");\n                break;\n            case 1003:  // probe quality\n                this.sliderInfo.rangeSettings = Sliders.getRangeValues(2);\n                this.sliderInfo.probePcts = this.reportRangePcts();\n                break;\n            case 1004:  // probe combat\n                this.sliderInfo.rangeSettings = Sliders.getRangeValues(3);\n                this.sliderInfo.probePcts = this.reportRangePcts();\n                break;\n            default:\n                break;\n        }\n\n    }\n\n    clickUpgrade(upg) {\n        mylog(\"upgrade click \", upg.name);\n        this.userSettings.upgStats[upg.id].purchased = true;\n\n        switch (upg.costType) {\n            case \"money\":\n                this.userSettings.money = this.userSettings.money.minus(upg.costValue);\n                break;\n            case \"knowledge\":\n                this.userSettings.knowledge = this.userSettings.knowledge.minus(upg.costValue);\n                break;\n            default:\n                break;\n        }\n\n        switch (upg.rewardType) {\n            case \"upgradeMult\":\n                this.userSettings.busStats[upg.rewardTarget].payoutAdj *= upg.rewardValue;\n                this.addOverlay(upg.rewardTarget, \"x\" + upg.rewardValue, \"ownedBonus\");\n                mylog(this.state.businesses[upg.rewardTarget].name, \"received multiplier\", upg.rewardValue);\n                break;\n            default:\n                mylog(\"unknown rewardType\");\n                break;\n        }\n\n    }\n\n    clickAnnouncement(a) {\n        mylog(\"announcement click \", a.id, a.text);\n        const idx = this.state.announcements.findIndex(atest => atest.id === a.id);\n        this.setState({\n            announcements: update(this.state.announcements, {\n                [idx]: {\n                    ack: { $set: true },\n                    counter: { $set: 0 },\n                }\n            }),\n        });\n\n\n    }\n\n    announce(text) {\n        mylog(\"announce \", text);\n        const today = new Date();\n        const time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds() + \".\" + today.getMilliseconds();\n        this.setState((state) => ({\n            announcements: [...state.announcements, {\n                id: this.announceCt++,\n                createTime: time,\n                text: text,\n                counter: 0,\n                expire: 3,\n                fadeout: 0.4,\n                ack: false,\n            },],\n        }))\n    }\n\n    clickConcentrate() {\n        mylog(\"clickConcentrate\");\n        if (this.state.concentrate <= 0) {\n            this.setState((state, props) => ({\n                concentrate: 10,\n            }));\n        }\n        mylog(\"concentrate:\", this.state.concentrate);\n    }\n\n    genOverlayObj(text, ovType = \"generic\") {\n        const xAdj = Math.floor((Math.random() * 40)) - 20;\n        const yAdj = Math.floor((Math.random() * 20)) - 10;\n        return {\n            id: \"overlay\" + this.overlayCt++,\n            expire: 1,\n            counter: 0,\n            ovType: ovType,\n            xTarget: xAdj,\n            yTarget: yAdj,\n            text: text,\n        }\n    }\n\n    genOverlayArr(origOverlay, text, ovType = \"generic\") {\n        mylog(\"addOverlay called:\", text);\n        return [...origOverlay, this.genOverlayObj(text, ovType)].slice(-4);\n    }\n\n    addOverlay(busIdx, text, ovType = \"generic\") {\n        const bus = this.state.businesses[busIdx];\n        mylog(\"addOverlay click \", text, bus.name);\n        this.setState((state, props) => ({\n            businesses: update(state.businesses, {\n                [busIdx]: {\n                    overlays: {\n                        $set: this.genOverlayArr(bus.overlays, text, ovType),\n                    }\n                },\n            }),\n        }));\n    }\n\n    changeTabs(idx) {\n        this.tabIndex = idx;\n    }\n\n    sliderChange(value) {\n        // mylog(\"slider change:\", value);\n        this.sliderInfo.probeSpendPct = value;\n    }\n    rangeChange(value) {\n        // mylog(\"range change:\", value);\n        if (this.sliderInfo.rangeSettings.rangeCt === 2) {\n            this.sliderInfo.rangeSettings.distribRange = [0, value[1], 100];\n        } else if (this.sliderInfo.rangeSettings.rangeCt === 3) {\n            this.sliderInfo.rangeSettings.distribRange = [0, value[1], value[2], 100];\n        }\n        this.sliderInfo.probePcts = this.reportRangePcts();\n        // mylog(\"fixed range:\", this.distribRange);\n    }\n    reportRangePcts() {\n        let pSpeedPct = 0, pQualityPct = 0, pCombatPct = 0;\n        mylog(\"spd:\", pSpeedPct, \"qual:\", pQualityPct, \"comb:\", pCombatPct);\n        if (this.sliderInfo.rangeSettings.rangeCt === 1) {\n            pSpeedPct = 100;\n        } else if (this.sliderInfo.rangeSettings.rangeCt === 2) {\n            pSpeedPct = Math.floor(this.sliderInfo.rangeSettings.distribRange[1]);\n            pQualityPct = 100 - pSpeedPct;\n\n        } else if (this.sliderInfo.rangeSettings.rangeCt === 3) {\n            pSpeedPct = Math.floor(this.sliderInfo.rangeSettings.distribRange[1]);\n            pQualityPct = Math.floor(this.sliderInfo.rangeSettings.distribRange[2] - pSpeedPct);\n            pCombatPct = 100 - (pSpeedPct + pQualityPct);\n        }\n        return [pSpeedPct, pQualityPct, pCombatPct];\n    }\n\n    purchaseProbe() {\n        const pCost = ComputeFunc.getPct(this.userSettings.money, this.sliderInfo.probeSpendPct);\n        const pcts = this.reportRangePcts();\n        mylog(\"probe cost:\", pCost.toNumber());\n        mylog(\"probe attrs - pSpeed:\", pcts[0], \"pQuality:\", pcts[1], \"pCombat:\", pcts[2]);\n        this.userSettings.probe = new Probe(pCost, pcts[0], pcts[1], pcts[2])\n\n\n    }\n\n    updateGame() {\n\n        const now = Date.now();\n        const dt = now - this.lastLoop;\n        this.lastLoop = now;\n        this.timeMultiplier = dt / 1000;\n        this.fpsPct = Math.floor((100 / dt) * 100);\n        // mylog(\"dt:\",dt,\"this.fpsPct:\",this.fpsPct);\n\n        this.incrementBusinessCounters();\n        this.incrementProbeDistance();\n        this.incrementAnnouncementCounters();\n        this.decrementSavedGameObj();\n        this.updateConcentrate();\n\n        const payoutMoneyThisTick = Business.getAllPayouts(this.state.businesses, this.userSettings);\n        this.userSettings.lifetimeEarnings = this.userSettings.lifetimeEarnings.plus(payoutMoneyThisTick);\n        // mylog(\"payoutMoneyThisTick:\",payoutMoneyThisTick.toFixed());\n\n        // const payoutKnowledgeThisTick = ComputeFunc.totalPayout(this.state.probes, this.userSettings.prestige);\n        const payoutKnowledgeThisTick = new Decimal(0);\n\n        /* reveal businesses if money reached */\n        this.state.businesses.forEach(item => {\n            let b = this.userSettings.busStats[item.id];\n            if (!b.revealed) {\n                if (item.costType === \"money\" && item.initialVisible.lte(this.userSettings.money)) {\n                    b.revealed = true;\n                    mylog(\"revealed business\", item.name);\n                };\n                if (item.costType === \"knowledge\" && item.initialVisible.lte(this.userSettings.knowledge)) {\n                    b.revealed = true;\n                    mylog(\"revealed business\", item.name);\n                };\n            }\n        })\n        /* reveal upgrades if resource reached */\n        this.state.upgrades.forEach(item => {\n            let u = this.userSettings.upgStats[item.id];\n            if (!u.revealed) {\n                if (item.watchType === \"money\" && item.watchValue.lte(this.userSettings.money)) {\n                    u.revealed = true;\n                    mylog(\"revealed upgrade\", item.name);\n                };\n                if (item.watchType === \"knowledge\" && item.watchValue.lte(this.userSettings.knowledge)) {\n                    u.revealed = true;\n                    mylog(\"revealed upgrade\", item.name);\n                };\n                if (item.watchType === \"businessOwned\" && this.userSettings.busStats[item.watchTarget].owned >= item.watchValue) {\n                    u.revealed = true;\n                    mylog(\"revealed upgrade\", item.name);\n                }\n            }\n        });\n\n        this.userSettings.money = this.userSettings.money.plus(payoutMoneyThisTick);\n        if (this.userSettings.money.gt(this.userSettings.curMaxMoney)) {\n            this.userSettings.curMaxMoney = this.userSettings.money;\n        }\n        this.userSettings.knowledge = this.userSettings.knowledge.plus(payoutKnowledgeThisTick);\n\n        this.setTitle();\n    }\n\n    getTabList() {\n        let rows = [];\n        rows.push(<Tab className=\"tab-list-item\" key=\"business-tab\">Business</Tab>);\n\n        // if space view activated\n        if (this.userSettings.featureEnabled[1000])\n            rows.push(<Tab className=\"tab-list-item\" key=\"probe-tab\">Space</Tab>);\n\n        rows.push(<Tab className=\"tab-list-item spacer-tab\" key=\"spacer-tab\"></Tab>);\n\n        if (this.userSettings.prestige.num.gt(0) || this.userSettings.prestigeNext.gt(0))\n            rows.push(<Tab className=\"tab-list-item prestige-tab\" key=\"prestige-tab\">Prestige</Tab>);\n\n        rows.push(<Tab className=\"tab-list-item settings-tab\" key=\"settings-tab\">Settings</Tab>);\n\n        return (\n            <div id=\"tabs\">\n                <TabList className=\"tab-list\">\n                    {rows}\n                </TabList>\n            </div>\n        )\n    }\n\n    getProbeTab() {\n        let probebutton, probeattribs, sliderattribs, offlinetext;\n        let currentProbe = \"\";\n        let sliderText = \"Spend \" + this.sliderInfo.probeSpendPct + \"%\";\n\n        // probes enabled\n        if (this.userSettings.featureEnabled[1001]) {\n            offlinetext = \"\";\n            currentProbe = <div id=\"previousProbe\">Current Probe: {HelperConst.moneySymbolSpan()}{HelperConst.showNum(this.userSettings.probe.value)}</div>\n            probebutton = (\n                <button className=\"probe-purchase\"\n                    onClick={this.purchaseProbe}>\n                    Buy Probe: {HelperConst.moneySymbolSpan()}{HelperConst.showNum(ComputeFunc.getPct(this.userSettings.money, this.sliderInfo.probeSpendPct))}\n                </button>\n            );\n            if (this.sliderInfo.rangeSettings.rangeCt === 1) {\n                probeattribs = <div className=\"probe-attribs\"></div>\n                sliderattribs =\n                    <div className=\"sliderattribs\">\n                        <span className=\"probe-prod-span\">Probe Production</span>\n                        <div className=\"sliderHeader\">{sliderText}</div>\n                        <div className=\"sliderContainer\">\n                            {Sliders.getSlider(this.sliderInfo, this.sliderChange)}\n                        </div>\n                    </div>\n            } else if (this.sliderInfo.rangeSettings.rangeCt === 2) {\n                probeattribs =\n                    <div className=\"probe-attribs\">\n                        <div className=\"probe-attrib speed-header\">Speed</div>\n                        <div className=\"probe-attrib quality-header\">Quality</div>\n                        <div></div>\n                        <div className=\"probe-attrib probe-speed\">{this.sliderInfo.probePcts[0]}%</div>\n                        <div className=\"probe-attrib probe-quality\">{this.sliderInfo.probePcts[1]}%</div>\n                        <div></div>\n                    </div>\n                sliderattribs =\n                    <div className=\"sliderattribs\">\n                        <span className=\"probe-prod-span\">Probe Production</span>\n                        <div className=\"sliderHeader\">{sliderText}</div>\n                        <div className=\"sliderContainer\">\n                            {Sliders.getSlider(this.sliderInfo, this.sliderChange)}\n                        </div>\n                        <div className=\"sliderHeader\">Distribute Funds</div>\n                        <div className=\"sliderContainer\">\n                            {Sliders.getRange(this.sliderInfo, this.rangeChange)}\n                        </div>\n                    </div>\n            } else {  // rangeCt === 3\n                probeattribs =\n                    <div className=\"probe-attribs\">\n                        <div className=\"probe-attrib speed-header\">Speed</div>\n                        <div className=\"probe-attrib quality-header\">Quality</div>\n                        <div className=\"probe-attrib combat-header\">Combat</div>\n                        <div className=\"probe-attrib probe-speed\">{this.sliderInfo.probePcts[0]}%</div>\n                        <div className=\"probe-attrib probe-quality\">{this.sliderInfo.probePcts[1]}%</div>\n                        <div className=\"probe-attrib probe-combat\">{this.sliderInfo.probePcts[2]}%</div>\n                    </div>\n                sliderattribs =\n                    <div className=\"sliderattribs\">\n                        <span className=\"probe-prod-span\">Probe Production</span>\n                        <div className=\"sliderHeader\">{sliderText}</div>\n                        <div className=\"sliderContainer\">\n                            {Sliders.getSlider(this.sliderInfo, this.sliderChange)}\n                        </div>\n                        <div className=\"sliderHeader\">Distribute Funds</div>\n                        <div className=\"sliderContainer\">\n                            {Sliders.getRange(this.sliderInfo, this.rangeChange)}\n                        </div>\n                    </div>\n            }\n        } else {\n            offlinetext = <div id=\"probe-offline\">[ OFFLINE ]</div>;\n        }\n\n\n        // space view\n        if (this.userSettings.featureEnabled[1000]) {\n            return (\n                <TabPanel className=\"react-tabs__tab-panel probe-tab-panel\">\n\n                    <div id=\"right-sidebar\">\n                        {offlinetext}\n                        {sliderattribs}\n                        {probeattribs}\n                        {probebutton}\n                        {currentProbe}\n                    </div>\n\n                    <Space\n                        probe={this.userSettings.probe}\n                        timeMultiplier={this.timeMultiplier}\n                    />\n\n                </TabPanel>\n            )\n        } else {\n            return (<div></div>);\n        }\n    }\n\n    toggleOverlay(event) {\n        mylog(\"event:\", event);\n        mylog(\"toggleOverlay target is:\", event.target.checked);\n        this.userSettings.toggles.overlays = event.target.checked;\n    }\n    getSettingsTab() {\n        return (\n            <TabPanel className=\"react-tabs__tab-panel settings-tab-panel\">\n                <div id=\"right-sidebar\">\n                    SETTINGS\n                </div>\n\n                <Settings\n                    toggles={this.userSettings.toggles}\n                    toggleOverlay={this.toggleOverlay}\n                />\n\n            </TabPanel>\n        )\n    }\n\n\n    getPrestigeTab() {\n        if (this.userSettings.prestige.num.gt(0) || this.userSettings.prestigeNext.gt(0))\n            return (\n                <TabPanel className=\"react-tabs__tab-panel prestige-tab-panel\">\n                    <div id=\"right-sidebar\">\n                        PRESTIGE\n                </div>\n\n                    <Prestige>\n\n                    </Prestige>\n                </TabPanel>\n            )\n    }\n\n    openHelpModal() {\n        // this.pause();\n        this.setState((state, props) => ({ helpModalIsOpen: true }));\n    }\n    closeHelpModal() {\n        mylog(\"close Help modal\");\n        // this.resume();\n        this.setState((state, props) => ({ helpModalIsOpen: false }));\n    }\n    afterOpenHelpModal() {\n        // references are now sync'd and can be accessed.\n        this.subtitle.style.color = '#f00';\n    }\n\n\n    render() {\n        const { isLoaded } = this.state;\n        if (!isLoaded) return <div id=\"wrapper\"></div>\n\n        let debugButtons;\n        if (HelperConst.DEBUG) {\n            debugButtons =\n                <div className=\"debugButtons\">\n                    <button className={this.state.pauseClass} onClick={this.pause}>Pause</button>\n                    <button className={\"sidebarButtons fancyButtons  pause-button \"} onClick={this.resume}>Resume</button>\n                    <button className=\"sidebarButtons fancyButtons  reset-button\" onClick={this.resetAll}>RESET</button>\n                    <button\n                        className=\"sidebarButtons fancyButtons  prestige-button\"\n                        disabled={this.userSettings.prestigeNext.gt(0) ? false : true}\n                        onClick={this.prestige}>Prestige</button>\n                    <button className=\"sidebarButtons fancyButtons  test-give-prestige\"\n                        onClick={this.prestigeCheat}>+{this.cheatPrestigeVal} prestige</button>\n                    <button className=\"sidebarButtons fancyButtons  test-give-money\"\n                        onClick={this.moneyCheat}>+50% money</button>\n                    <button className=\"sidebarButtons fancyButtons  announce-button\" onClick={() => this.announce(HelperConst.thumbsUpSymbol+\" great job winning!  oh boy this is just super.\")}>Announce</button>\n                    <button className=\"sidebarButtons fancyButtons  overlay-button\" onClick={() => this.addOverlay(0, \"X2\")}>Mental Math Overlay</button>\n                    {/* <button className=\"sidebarButtons fancyButtons  overlay-button\" onClick={() => this.addOverlay(1, \"X2\")}>Newspaper Overlay</button> */}\n                    {/* <button className=\"sidebarButtons fancyButtons  ref-button\" onClick={() => mylog(\"domRef:\", this.state.businesses[0].domRef)}>Odd Job domRef</button> */}\n                    {/* <button className=\"sidebarButtons fancyButtons  ref-button\" onClick={() => mylog(\"domRef2:\", this.state.businesses[1].domRef)}>Newspaper domRef</button> */}\n                    {/* <button className=\"sidebarButtons fancyButtons  ref-button\" onClick={() => mylog(\"getRect:\", Business.getPosition(this.state.businesses[0].domRef))}>getRect</button>  */}\n\n                    <button className=\"sidebarButtons fancyButtons  save-button\" onClick={this.saveGame}>SAVE</button>\n                    <button className=\"sidebarButtons fancyButtons  save-button\" onClick={this.loadGame}>LOAD</button>\n                    {/* <h3>Zoom Index: {this.zoomLevel}</h3><br /> */}\n                    {/* <h3>RangeCt: {this.sliderInfo.rangeSettings.rangeCt}</h3> */}\n\n                    <button onClick={this.openHelpModal}>Open Modal</button>\n\n\n\n                </div>\n        }\n\n\n        return (\n            <div id=\"wrapper\">\n                <div id=\"header\">\n\n                    <Income\n                        knowledge={this.userSettings.knowledge}\n                        businesses={this.state.businesses}\n                        concentrate={this.state.concentrate}\n                        userSettings={this.userSettings}\n                    />\n\n                </div>\n\n                <Tabs\n                    className=\"react-tabs-container\"\n                    selectedIndex={this.tabIndex}\n                    onSelect={idx => this.changeTabs(idx)}>\n\n                    {this.getTabList()}\n\n                    <TabPanel className=\"react-tabs__tab-panel main-tab-panel\">\n\n                        <div className=\"left-sidebar\">\n\n                            <Upgrades\n                                upgrades={this.state.upgrades}\n                                businesses={this.state.businesses}\n                                userSettings={this.userSettings}\n                                onClick={this.clickUpgrade}\n                                enableFeature={this.enableFeature}\n                            />\n\n                        </div>\n                        <div id=\"right-sidebar\">\n\n\n                            <div className=\"purchaseAmts\">\n\n                                <div className=\"buy-wrapper\">\n                                    <span className=\"buyx-prefix\">Buy {HelperConst.multiplySymbol}</span>\n                                    <Dropdown\n                                        options={HelperConst.purchaseOpts}\n                                        onChange={this.purchaseAmtDropDownHandler}\n                                        value={this.purchaseAmt}\n                                        placeholder=\"Select an option\" />\n                                </div>\n                            </div>\n\n                            <div id=\"concentrate-container\">\n                                <button\n                                    id=\"concentrateButton\"\n                                    className={this.state.concentrateClass}\n                                    onClick={this.clickConcentrate}\n                                    disabled={this.state.concentrate === 0 ? false : true}\n                                >{this.state.concentrateClass === \"concCooldown\"\n                                    ? \"Wait: \" + Math.abs(Math.floor(this.state.concentrate))\n                                    : this.state.concentrateClass === \"concActive\"\n                                        ? HelperConst.concentrateSymbol+\" : \" + Math.abs(Math.floor(this.state.concentrate))\n                                        : \"Concentrate 2x Speed\"}\n                                </button>\n                            </div>\n\n                            {debugButtons}\n\n                        </div>\n\n                        <div id=\"content\">\n                            <div className=\"container\">\n\n                                <Business\n                                    businesses={this.state.businesses}\n                                    concentrate={this.state.concentrate}\n                                    userSettings={this.userSettings}\n                                    purchaseAmt={this.purchaseAmt}\n                                    onClick={this.clickBusiness}\n                                    domRefs={this.domRefs}\n                                />\n\n\n                            </div>\n\n                        </div>\n\n                    </TabPanel>\n\n                    {this.getProbeTab()}\n\n                    <TabPanel className=\"react-tabs__tab-panel spacer-tab-panel\"></TabPanel>\n\n                    {this.getPrestigeTab()}\n                    {this.getSettingsTab()}\n\n                </Tabs>\n\n                <div id=\"footer\">\n\n                    <div id=\"version\">v. 0.0.1</div>\n                    <div id=\"fps\">fps:{this.fpsPct}%</div>\n                    {this.gameSavedObj.content}\n\n                </div>\n\n                <div id=\"announcements\">\n                    <Announce\n                        announcements={this.state.announcements}\n                        onClick={this.clickAnnouncement}\n                    />\n                </div>\n\n                <Modal\n                    isOpen={this.state.helpModalIsOpen}\n                    // onAfterOpen={this.afterOpenHelpModal}\n                    onRequestClose={this.closeHelpModal}\n                    contentLabel=\"Example Modal\"\n                    shouldCloseOnOverlayClick={false}\n                    className=\"Modal\"\n                    overlayClassName=\"Modal-Overlay\"\n                >\n                    {/* <h2 ref={subtitle => this.subtitle = subtitle}>Hello</h2> */}\n                    <div className=\"modal-container\">\n                        <div className=\"modalHeader\">\n                            <div className=\"modalTitle\">Help</div>\n                            <button\n                                className=\"modalButtons fancyButtons helpModalCloseButton\"\n                                onClick={this.closeHelpModal}>\n                                CLOSE\n                            </button>\n                        </div>\n                        <div className=\"modalContent\">\n                            {HelperConst.modalHelp()}\n\n                        </div>\n                    </div>\n                </Modal>\n\n            </div>\n\n        )\n    }\n\n\n\n\n}\n\n// =====================================================\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Neumann from './Neumann';\n\n\n// =====================================================\n\n\n// =====================================================\n\nReactDOM.render(<Neumann />, document.getElementById(\"root\"));\n\n"],"sourceRoot":""}