(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){},37:function(e,t,a){e.exports=a(58)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},49:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(16),o=a.n(r),i=a(22),u=a(13),c=a(8),l=a(3),m=a(4),d=a(6),p=a(5),y=a(2),g=a(7),h=a(14),v=a.n(h),f=a(34),b=a.n(f),w=a(31),k=a.n(w),E=(a(11),a(44),a(45),a(46),a(15)),N=a(12),O=a(59),M=function(){function e(){Object(l.a)(this,e)}return Object(m.a)(e,null,[{key:"moneySymbolSpan",value:function(){return s.a.createElement("span",{className:"moneySymbol"},this.moneySymbol)}},{key:"knowledgeSymbolSpan",value:function(){return s.a.createElement("span",{className:"knowledgeSymbol"},this.knowledgeSymbol)}},{key:"prestigeSymbolSpan",value:function(){return s.a.createElement("span",{className:"prestigeSymbol"},this.prestigeSymbol)}},{key:"multiplySymbolSpan",value:function(){return s.a.createElement("span",{className:"multiplySymbol"},this.multiplySymbol)}},{key:"showNum",value:function(t){return e.myFormatterNum().format(t)}},{key:"showInt",value:function(t){return e.myFormatterInt().format(t)}},{key:"myNumCfg",value:function(){return{backend:"decimal.js",sigfigs:4,maxSmall:100,format:"engineering",Decimal:N}}},{key:"myIntCfg",value:function(){return{backend:"decimal.js",sigfigs:4,maxSmall:0,format:"engineering",Decimal:N}}},{key:"myFormatterNum",value:function(){return this.myNumFormat||(console.log("entered defining area"),this.myNumFormat=new O.Formatter(e.myNumCfg())),this.myNumFormat}},{key:"myFormatterInt",value:function(){return this.myIntFormat||(this.myIntFormat=new O.Formatter(e.myIntCfg())),this.myIntFormat}}]),e}();M.moneySymbol="$",M.knowledgeSymbol="\u29a8",M.prestigeSymbol="\u039b",M.multiplySymbol="\u2a2f",M.thumbsUpSymbol="\ud83d\udc4d",M.purchaseOpts=["1","10","25","100","Max","Max OCD","Max Upg","PrimeTime"],M.purchaseOptsNum=M.purchaseOpts.filter(function(e){return e.match(/\d/)}),M.purchaseOptsSpecial=M.purchaseOpts.filter(function(e){return!e.match(/\d/)}),M.timeMilestones=[10,25,50];var T=a(12),j=function(){function e(){Object(l.a)(this,e)}return Object(m.a)(e,null,[{key:"availMaxUpgrade",value:function(e,t){var a=e+t;if(a>=100){var n=100*Math.floor(a/100);return n<=e?n+100:n}return a>=50?e>=50?100:50:e>=25?50:25}},{key:"timeMilestoneIdx",value:function(e){var t=-1;M.timeMilestones.forEach(function(a,n){e>=a&&(t=n)});var a=Math.floor(e/100);return t+a}},{key:"getMilestone",value:function(e){var t=M.timeMilestones.length-1;return e<=t?M.timeMilestones[e]:100*(e-t)}},{key:"getMilestonesAttained",value:function(e,t){for(var a=[],n=e+1;n<=t;n++)a.push([this.getMilestone(n)]);return a}},{key:"buyPct",value:function(e,t){var a=t.div(e).times(100).toNumber();return a>100?100:a}},{key:"earnPct",value:function(e){return e.timeAdjusted<.2||e.timeAdjusted-e.timeCounter<.1?100:e.timeCounter/e.timeAdjusted*100}},{key:"computePayoutValueMoney",value:function(e,t){var a=Math.floor(e.owned/25),n=a>2?2:a,s=Math.floor(e.owned/100),r=t.num.times(t.val).div(100).plus(1);return new T(e.incomeBase.times(e.owned).times(Math.pow(2,n)).times(Math.pow(2,s)).times(e.upgradeMult).times(r))}},{key:"computePayoutValueKnowledge",value:function(e,t){return e.incomeBase.times(e.owned).times(e.upgradeMult)}},{key:"computeEarningPerSec",value:function(e,t){return"money"===e.incomeType?this.computePayoutValueMoney(e,t).div(e.timeAdjusted):this.computePayoutValueKnowledge(e,t).div(e.timeAdjusted)}},{key:"computeTotalEarningPerSec",value:function(e,t){var a=this,n=new T(0);return e.forEach(function(e){n=n.plus(a.computeEarningPerSec(e,t))}),n}},{key:"getPayoutMoney",value:function(e,t){return e.payout?this.computePayoutValueMoney(e,t):new T(0)}},{key:"getPayoutKnowledge",value:function(e,t){return this.computePayoutValueKnowledge(e,t)}},{key:"getPayout",value:function(e,t){return"money"===e.incomeType?this.getPayoutMoney(e,t):this.getPayoutKnowledge(e,t)}},{key:"totalPayout",value:function(t,a){var n=new T(0);return t.forEach(function(t){n=n.plus(e.getPayout(t,a))}),n}},{key:"getEarningPerTick",value:function(e,t){return e.times(t/1e3)}},{key:"getEarningPct",value:function(e,t){return e.div(t).times(100).toFixed(2)}},{key:"calcPrestigeEarned",value:function(e){return T.sqrt(e.div(Math.pow(10,9))).times(150).floor()}},{key:"calcPrestigeEarnedFromMax",value:function(e){return e.div(Math.pow(10,12)).times(8).plus(1).sqrt().minus(1).div(2)}},{key:"getCost",value:function(e,t,a){var n=this.maxBuy(e,a),s=0;switch(t){case"Max":case"Max OCD":case"Max Upg":case"PrimeTime":s=n[t];break;default:s=t}return{num:parseInt(s,10),cost:e.costBase.times(Math.pow(e.costCoef,e.owned)*(Math.pow(e.costCoef,s)-1)).div(e.costCoef-1)}}},{key:"maxBuy",value:function(e,t){var a=parseInt(new T(t.times(e.costCoef-1).div(e.costBase.times(Math.pow(e.costCoef,e.owned)))).plus(1).log(e.costCoef).floor(),10),n=this.availMaxUpgrade(e.owned,a)-e.owned,s=25*Math.floor((a+e.owned)/25)-e.owned;s=s>=0?s:25-e.owned;var r=this.primeFactors(),o=0,i=e.owned+a;for(var u in r)if(i>=r[u]&&(o=r[u]),r[u]>i)break;return{Max:a>0?a:1,"Max OCD":s,"Max Upg":n,PrimeTime:o-=e.owned}}},{key:"nextPrime",value:function(e){var t=this.primeFactors();for(var a in t)if(t[a]>e)return t[a]}},{key:"primeFactors",value:function(){if(this.primes)return this.primes;var e=[];console.log("creating primes"),console.time("prime creation");var t,a,n=[];for(t=2;t<=25e3;++t)if(!n[t])for(e.push(t),a=t<<1;a<=25e3;a+=t)n[a]=!0;return this.primes=e,console.timeEnd("prime creation"),console.log("primes length: "+this.primes.length),this.primes}}]),e}(),S=(a(49),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=j.computeTotalEarningPerSec(this.props.businesses,this.props.prestige),t=j.computeTotalEarningPerSec(this.props.probes,this.props.prestige),a=this.props.prestige.num.times(this.props.prestige.val);return s.a.createElement("div",{className:"header-wrapper"},s.a.createElement("div",{className:"income"},s.a.createElement("div",{className:"income-header"},"Money:"),s.a.createElement("div",{className:"income-money"},M.moneySymbolSpan(),M.showNum(this.props.money)),s.a.createElement("div",{className:"income-earning"},"(+ ",M.moneySymbolSpan(),M.showNum(e),"/s)"),s.a.createElement("div",{className:"income-header"},"Knowledge:"),s.a.createElement("div",{className:"income-knowledge"},M.knowledgeSymbolSpan(),M.showNum(this.props.knowledge)),s.a.createElement("div",{className:"income-learning"},"(+ ",M.knowledgeSymbolSpan(),M.showNum(t),"/s)")),s.a.createElement("div",{className:"text-effect"},s.a.createElement("h1",{className:"neon","data-text":"NEUMANN"},"NEUMANN"),s.a.createElement("div",{className:"gradient"})),s.a.createElement("div",{className:"prestige"},s.a.createElement("div",{className:"prestige-header"},"Prestige:"),s.a.createElement("div",{className:"prestige-units"},M.prestigeSymbolSpan(),M.showInt(this.props.prestige.num)),s.a.createElement("div",{className:"prestige-earning"},"(+ ",M.prestigeSymbolSpan(),M.showInt(this.props.prestigeNext),")"),s.a.createElement("div",{className:"prestige-header"},M.moneySymbolSpan(),"Boost:"),s.a.createElement("div",{className:"prestige-boost"},M.showInt(a),"%")))}}]),t}(s.a.Component)),C=a(19),I=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"getDomRef",value:function(e){var t=this.props.domRefs.findIndex(function(t){return t.name===e});if(!(t<0))return this.props.domRefs[t].domRef}},{key:"genOverlays",value:function(e){var t=this;return e.overlays.map(function(a,n){var r="overlay-text ",o=parseInt(t.getDomRef(e.name).current.offsetLeft,10)+80,i=parseInt(t.getDomRef(e.name).current.offsetTop,10)-15;return a.counter>a.expire&&(r+="expired "),s.a.createElement(C.Motion,{key:"overlay-text "+a.id,defaultStyle:{top:i,left:o,opacity:1},style:{top:Object(C.spring)(i-40+a.yTarget),left:Object(C.spring)(o+a.xTarget),opacity:Object(C.spring)(0,{stiffness:15,damping:14})}},function(e){return s.a.createElement("div",{key:"overlay-text "+a.id,className:r+"rainbow_text_animated ",style:{top:e.top,left:e.left,opacity:e.opacity}},a.text)})})}},{key:"render",value:function(){var e=this,t=this.props.businesses.reduce(function(e,t){return t.revealed&&e.push(t),e},[]),a=j.computeTotalEarningPerSec(this.props.businesses,this.props.prestige),n=t.map(function(t){var n=t.name,r=j.getCost(t,e.props.purchaseAmt,e.props.money),o={width:j.buyPct(r.cost,e.props.money)+"%"},i={width:j.earnPct(t)+"%"},u="",c="",l=!1;e.props.money.gte(r.cost)?(u="business-buy canAfford ",c="cost-wrapper canAfford "):(u="business-buy cannotAfford ",l=!0,c="cost-wrapper cannotAfford ");var m=j.computeEarningPerSec(t,e.props.prestige),d=j.computePayoutValueMoney(t,e.props.prestige),p=j.getEarningPct(m,a),y=e.genOverlays(t);return s.a.createElement("div",{key:n+"business",className:"business money ",ref:e.getDomRef(n)},s.a.createElement("div",{className:"overlays-wrapper"},y),s.a.createElement("div",{className:"business-buy-progress money "},s.a.createElement("div",{className:"business-buy-progress-pct money ",style:o},s.a.createElement("span",null))),s.a.createElement("div",{className:"business-earn-progress money "},s.a.createElement("div",{className:"business-earn-progress-pct money ",style:i},s.a.createElement("span",null))),s.a.createElement("button",{key:n+"button",className:u+"money ",onClick:function(){return e.props.onClick(t)},disabled:l},s.a.createElement("span",{className:"buyMultiple"},r.num,M.multiplySymbolSpan())," ",n),s.a.createElement("div",{key:n+"owned",className:"business-owned"},M.showInt(t.owned)),s.a.createElement("div",{key:n+"cost-wrapper",className:c},s.a.createElement("div",{key:n+"cost-money",className:"business-cost-money"},M.moneySymbolSpan(),M.showNum(r.cost))),s.a.createElement("div",{key:n+"earning-wrapper",className:"earning-wrapper"},s.a.createElement("div",{key:n+"revenue-total",className:"business-revenue-total"},"+",M.moneySymbolSpan(),M.showNum(d))),s.a.createElement("div",{key:n+"earning-pct-wrapper",className:"earning-pct-wrapper"},s.a.createElement("div",{key:n+"earning-pct",className:"earning-pct"},p,"%")))});return s.a.createElement("div",{className:"business-container"},n)}}],[{key:"applyMultiplier",value:function(e,t){return v()(e,{upgradeMult:{$set:e.upgradeMult*t}})}},{key:"getAdjustedTimeBase",value:function(e,t){var a=j.timeMilestoneIdx(t);return a>=0?e.timeBase/Math.pow(2,a):e.timeBase}},{key:"getPosition",value:function(e){return o.a.findDOMNode(e.current).getBoundingClientRect()}},{key:"getNewOverlay",value:function(e,t){console.log("addOverlay called:",t,e.name);var a=40*Math.random()-20,n=20*Math.random()-10;return[].concat(Object(i.a)(e.overlays),[{id:"bus"+this.overlayCt++,counter:0,expire:1,xTarget:a,yTarget:n,text:t}])}}]),t}(s.a.Component);I.overlayCt=0;var A=a(12);var x=a(12);var V=a(12);var B=a(12),P=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),t}(s.a.Component);P.freshState=function(){return Object(c.a)({},P.coreObjOnly(),{prestige:{num:new B(0),val:5},prestigeNext:new B(0),lifetimeEarnings:new B(0),lifetimeLearning:new B(0),curMaxMoney:new B(0),curTotalClicks:0})},P.coreObjOnly=function(){return{money:new B(1),knowledge:new B(0),businesses:[{name:"Odd Jobs",desc:"desc1",owned:1,incomeType:"money",incomeBase:new A(1),costType:"money",costBase:new A(4),costCoef:1.07,timeBase:.6,timeAdjusted:.6,timeCounter:0,payout:!1,initialVisible:new A(1),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Newspaper Delivery",desc:"desc2",owned:0,incomeType:"money",incomeBase:new A(20),costType:"money",costBase:new A(60),costCoef:1.15,timeBase:3,timeAdjusted:3,timeCounter:0,payout:!1,initialVisible:new A(60),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Car Wash",desc:"desc2",owned:0,incomeType:"money",incomeBase:new A(90),costType:"money",costBase:new A(720),costCoef:1.14,timeBase:6,timeAdjusted:6,timeCounter:0,payout:!1,initialVisible:new A(540),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Pizza Delivery",desc:"desc1",owned:0,incomeType:"money",incomeBase:new A(360),costType:"money",costBase:new A(8640),costCoef:1.13,timeBase:12,timeAdjusted:12,timeCounter:0,payout:!1,initialVisible:new A(4320),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Donut Shop",desc:"desc2",owned:0,incomeType:"money",incomeBase:new A(2160),costType:"money",costBase:new A(103680),costCoef:1.12,timeBase:24,timeAdjusted:24,timeCounter:0,payout:!1,initialVisible:new A(51840),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Shrimp Boat",desc:"desc2",owned:0,incomeType:"money",incomeBase:new A(6480),costType:"money",costBase:new A(1244160),costCoef:1.11,timeBase:96,timeAdjusted:96,timeCounter:0,payout:!1,initialVisible:new A(622080),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Hockey Team",desc:"desc2",owned:0,incomeType:"money",incomeBase:new A(19440),costType:"money",costBase:new A(14929920),costCoef:1.1,timeBase:384,timeAdjusted:384,timeCounter:0,payout:!1,initialVisible:new A(7464960),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Movie Studio",desc:"desc1",owned:0,incomeType:"money",incomeBase:new A(58320),costType:"money",costBase:new A(179159040),costCoef:1.09,timeBase:1536,timeAdjusted:1536,timeCounter:0,payout:!1,initialVisible:new A(89579520),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Bank",desc:"desc2",owned:0,incomeType:"money",incomeBase:new A(174960),costType:"money",costBase:new A(2149908480),costCoef:1.08,timeBase:6144,timeAdjusted:6144,timeCounter:0,payout:!1,initialVisible:new A(1074954240),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]},{name:"Oil Company",desc:"desc2",owned:0,incomeType:"money",incomeBase:new A(804816),costType:"money",costBase:new A(25798901760),costCoef:1.07,timeBase:36864,timeAdjusted:36864,timeCounter:0,payout:!1,initialVisible:new A(29668737024),upgradeMult:1,upgradeAdd:0,revealed:!1,overlays:[]}],probes:[{name:"Probe1",desc:"desc1",owned:1,incomeType:"knowledge",incomeBase:new x(.05),costType:"knowledge",costBase:new x(4),costCoef:1.07,timeBase:1,timeAdjusted:1,initialVisible:new x(1),upgradeMult:1,upgradeAdd:0,revealed:!1}],upgrades:[{name:"New Shoes",watchType:"money",watchValue:new V(100),costType:"money",costValue:new V(500),rewardType:"upgradeMult",rewardTarget:"Odd Jobs",rewardValue:10,revealed:!1,purchased:!1},{name:"Auto Juicer",watchType:"money",watchValue:new V(1e3),costType:"money",costValue:new V(1e4),rewardType:"upgradeMult",rewardTarget:"Odd Jobs",rewardValue:10,revealed:!1,purchased:!1},{name:"Demographics",watchType:"knowledge",watchValue:new V(1),costType:"knowledge",costValue:new V(30),rewardType:"upgradeMult",rewardTarget:"Newspaper Delivery",rewardValue:10,revealed:!1,purchased:!1},{name:"Sweet Ride",watchType:"money",watchValue:new V(1e3),costType:"money",costValue:new V(1e4),rewardType:"upgradeMult",rewardTarget:"Newspaper Delivery",rewardValue:10,revealed:!1,purchased:!1},{name:"Advertising",watchType:"knowledge",watchValue:new V(30),costType:"knowledge",costValue:new V(200),rewardType:"upgradeMult",rewardTarget:"Newspaper Delivery",rewardValue:10,revealed:!1,purchased:!1},{name:"Bicycle with Basket",watchType:"money",watchValue:new V(1e4),costType:"money",costValue:new V(1e6),rewardType:"upgradeMult",rewardTarget:"Odd Jobs",rewardValue:10,revealed:!1,purchased:!1},{name:"Helper",watchType:"money",watchValue:new V(1e7),costType:"money",costValue:new V(1e8),rewardType:"upgradeMult",rewardTarget:"Odd Jobs",rewardValue:10,revealed:!1,purchased:!1},{name:"Demographics2",watchType:"knowledge",watchValue:new V(1e3),costType:"knowledge",costValue:new V(3e3),rewardType:"upgradeMult",rewardTarget:"Newspaper Delivery",rewardValue:10,revealed:!1,purchased:!1},{name:"Sweet Ride2",watchType:"money",watchValue:new V(1e7),costType:"money",costValue:new V(25e6),rewardType:"upgradeMult",rewardTarget:"Newspaper Delivery",rewardValue:10,revealed:!1,purchased:!1},{name:"Advertising2",watchType:"knowledge",watchValue:new V(1e4),costType:"knowledge",costValue:new V(25e3),rewardType:"upgradeMult",rewardTarget:"Newspaper Delivery",rewardValue:10,revealed:!1,purchased:!1}],timeMilestone:0,announcements:[]}};var D=a(35),R=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){console.log("upgrades didmount")}},{key:"componentWillUnmount",value:function(){console.log("upgrades willunmount")}},{key:"render",value:function(){var e=this,t=this.props.upgrades.reduce(function(e,t){return!t.purchased&&t.revealed&&e.push(t),e},[]).map(function(t){if(t.purchased||!t.revealed)return"";var a=t.name,n="",r=!0,o=0,i="";"money"===t.costType&&(i="money ",o=j.buyPct(t.costValue,e.props.money),e.props.money.gte(t.costValue)?(n+="canAfford ",r=!1):n+="cannotAfford "),"knowledge"===t.costType&&(i="knowledge ",o=j.buyPct(t.costValue,e.props.knowledge),e.props.knowledge.gte(t.costValue)?(n+="canAfford ",r=!1):n+="cannotAfford ");var u="";switch(t.costType){case"knowledge":u=M.knowledgeSymbolSpan();break;default:u=M.moneySymbolSpan()}var c=o<100?"upgAnim ":"",l={width:o+"%"};return s.a.createElement("div",{key:a+"upgrade",className:"upgrade "+i},s.a.createElement("div",{className:"upgrade-buy-progress "+i},s.a.createElement("div",{className:"upgrade-buy-progress-pct "+i+c,style:l},s.a.createElement("span",null))),s.a.createElement("button",{key:a+"button",className:"upgrade-buy "+n+i,onClick:function(){return e.props.onClick(t)},disabled:r},a),s.a.createElement("div",{key:a+"upgrade-reward",className:"upgrade-reward"},t.rewardTarget," x",t.rewardValue),s.a.createElement("div",{key:a+"upgrade-cost-wrapper",className:"upgrade-cost-wrapper "+n+i},u,M.showNum(t.costValue)))});return s.a.createElement(D.a,{permanentTrackY:!0,className:"upgrade-container"},t)}}]),t}(s.a.Component),F=(a(57),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.announcements.map(function(t,a){var n=t.ack?"announce-fadeout":"";return s.a.createElement("div",{className:"announcement "+n,key:t.id,onClick:function(){return e.props.onClick(t)}},s.a.createElement("span",{className:"announce-text"},t.text))});return s.a.createElement("div",{className:"announce-container"},t)}}]),t}(s.a.Component)),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=Object(c.a)({},P.freshState()),a.timeInterval=100,a.timeMultiplier=a.timeInterval/1e3,a.announceCt=0,a.overlayCt=0,a.gameIntervalId=null,a.prestigeIntervalId=null,a.gameSaveIntervalId=null,a.domRefs=[],a.purchaseAmt="1",a.tabIndex=0,a.populateBusDomRefs=a.populateDomRefs.bind(Object(y.a)(a)),a.restart=a.restart.bind(Object(y.a)(a)),a.resetAll=a.resetAll.bind(Object(y.a)(a)),a.pause=a.pause.bind(Object(y.a)(a)),a.resume=a.resume.bind(Object(y.a)(a)),a.saveGame=a.saveGame.bind(Object(y.a)(a)),a.prestige=a.prestige.bind(Object(y.a)(a)),a.updatePrestigeEarned=a.updatePrestigeEarned.bind(Object(y.a)(a)),a.updateGame=a.updateGame.bind(Object(y.a)(a)),a.clickBusiness=a.clickBusiness.bind(Object(y.a)(a)),a.clickUpgrade=a.clickUpgrade.bind(Object(y.a)(a)),a.clickAnnouncement=a.clickAnnouncement.bind(Object(y.a)(a)),a.purchaseAmtDropDownHandler=a.purchaseAmtDropDownHandler.bind(Object(y.a)(a)),a.announce=a.announce.bind(Object(y.a)(a)),a.prestigeCheat=a.prestigeCheat.bind(Object(y.a)(a)),a.cheatPrestigeVal="1e9",a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){console.log("game didmount"),this.resetAll(),console.log(M.purchaseOptsSpecial)}},{key:"componentWillUnmount",value:function(){console.log("game willunmount"),clearInterval(this.gameIntervalId),clearInterval(this.prestigeIntervalId),clearInterval(this.gameSaveIntervalId)}},{key:"componentDidUpdate",value:function(){}},{key:"populateDomRefs",value:function(){var e=this;this.state.businesses.forEach(function(t){console.log("creating domRef for",t.name),e.domRefs.push({name:t.name,domRef:s.a.createRef()})}),console.log("populated domRefs:",this.domRefs)}},{key:"resetAll",value:function(){this.pause(),this.setState(function(e){return Object(c.a)({},P.freshState())}),this.announceCt=0,this.populateDomRefs(),this.resume()}},{key:"restart",value:function(){this.pause(),this.setState(function(e){return Object(c.a)({},P.coreObjOnly())}),this.populateDomRefs(),this.resume()}},{key:"pause",value:function(){this.gameIntervalId&&(clearInterval(this.gameIntervalId),delete this.gameIntervalId),this.prestigeIntervalId&&(clearInterval(this.prestigeIntervalId),delete this.prestigeIntervalId),this.gameSaveIntervalId&&(clearInterval(this.gameSaveIntervalId),delete this.gameSaveIntervalId)}},{key:"resume",value:function(){this.gameIntervalId||(this.gameIntervalId=setInterval(this.updateGame,this.timeInterval)),this.prestigeIntervalId||(this.prestigeIntervalId=setInterval(this.updatePrestigeEarned,1e3)),this.gameSaveIntervalId||(this.gameSaveIntervalId=setInterval(this.saveGame,1e4))}},{key:"loadGame",value:function(){}},{key:"saveGame",value:function(){console.log("retrieve jeff cookie:",k.a.load("jeff")),console.log("retrieve businesses cookie:",k.a.load("businesses")),this.announce("game saved")}},{key:"updatePrestigeEarned",value:function(){var e=j.calcPrestigeEarnedFromMax(this.state.curMaxMoney).minus(this.state.prestige.num);e.gt(0)&&!e.eq(this.state.prestigeNext)&&this.setState({prestigeNext:e})}},{key:"prestige",value:function(){if(this.state.prestigeNext.gt(0)){this.updatePrestigeEarned();var e=this.state.prestige.num.plus(this.state.prestigeNext);this.restart(),this.setState(function(t){return{prestige:{num:e,val:t.prestige.val}}})}}},{key:"purchaseAmtDropDownHandler",value:function(e){this.updatePurchaseAmt(e.value)}},{key:"updatePurchaseAmt",value:function(e){console.log("received new purchaseAmt:",e),-1!==M.purchaseOpts.indexOf(e)&&this.purchaseAmt!==e&&(this.purchaseAmt=e,console.log("new purchaseAmt:",e))}},{key:"prestigeCheat",value:function(){var e=this;console.log("CHEAT: adding",this.cheatPrestigeVal,"prestige"),this.setState(function(t){return{prestige:{num:t.prestige.num.plus(e.cheatPrestigeVal),val:t.prestige.val}}})}},{key:"incrementBusinessCounters",value:function(){var e=this,t=!1,a=this.state.businesses.map(function(a){var n=Object(c.a)({},a);0===a.owned?a.revealed&&0!==a.timeCounter&&(n.timeCounter=0,t=!0,console.log("resetting ",a.name," to timeCounter ",n.timeCounter)):(n.payout=!1,n.timeCounter=n.timeCounter+e.timeMultiplier,n.timeCounter>=n.timeAdjusted&&(n.payout=!0,n.timeCounter=0),t=!0);var s=n.overlays.filter(function(e){return e.counter<e.expire});return n.overlays=s.map(function(t,a){return t.counter=t.counter+e.timeMultiplier,t}),n});t&&this.setState(function(e){return{businesses:a}})}},{key:"incrementAnnouncementCounters",value:function(){var e=this,t=this.state.announcements.reduce(function(e,t){return(!t.ack||t.ack&&t.counter<t.fadeout)&&e.push(t),e},[]).map(function(t){var a=Object(c.a)({},t);return a.counter+=e.timeMultiplier,a.counter>=a.expire&&(a.ack=!0,a.counter=0),a});this.setState(function(e){return{announcements:t}})}},{key:"updateGame",value:function(){var e=this;this.incrementBusinessCounters(),this.incrementAnnouncementCounters();var t=j.totalPayout(this.state.businesses,this.state.prestige),a=this.state.lifetimeEarnings.plus(t),n=j.totalPayout(this.state.probes,this.state.prestige),s=this.state.businesses.map(function(t){var a=Object(c.a)({},t);return t.revealed||("money"===t.costType&&t.initialVisible.lte(e.state.money)&&(a.revealed=!0,console.log("revealed business",t.name)),"knowledge"===t.costType&&t.initialVisible.lte(e.state.knowledge)&&(a.revealed=!0,console.log("revealed business",t.name))),a}),r=this.state.upgrades.map(function(t){var a=Object(c.a)({},t);return t.revealed||("money"===t.watchType&&t.watchValue.lte(e.state.money)&&(a.revealed=!0,console.log("revealed upgrade",t.name)),"knowledge"===t.watchType&&t.watchValue.lte(e.state.knowledge)&&(a.revealed=!0,console.log("revealed upgrade",t.name))),a}),o=this.state.money.plus(t),i=this.state.curMaxMoney;o.gt(i)&&(i=o),this.setState(function(e){return{money:o,knowledge:e.knowledge.plus(n),businesses:s,upgrades:r,lifetimeEarnings:a,curMaxMoney:i}})}},{key:"clickBusiness",value:function(e){var t=this;console.log("business click ",e.name);var a=j.getCost(e,this.purchaseAmt,this.state.money),n=this.state.businesses.map(function(t){var n=Object(c.a)({},t);return n.name===e.name&&(n.owned+=a.num,n.overlays=I.getNewOverlay(t,"+"+a.num),console.log("adding",a.num,"to",n.name)),n});console.log(e.name,"owned set to",e.owned+a.num);var s=this.state.timeMilestone,r=j.timeMilestoneIdx(this.state.timeMilestone),o=n.reduce(function(e,t){return t.owned<e?t.owned:e},Number.MAX_SAFE_INTEGER),i=j.timeMilestoneIdx(o);i>r&&(s=j.getMilestone(i),console.log("new owned milestone:",s),n=n.map(function(e){var t=Object(c.a)({},e);return t.timeAdjusted=I.getAdjustedTimeBase(e,s),console.log(t.name,"timeAdjusted now",t.timeAdjusted),t}),j.getMilestonesAttained(r,i).forEach(function(e){t.announce(e+" all businesses! Speed Doubled!")})),this.setState(function(e,t){return{businesses:n,money:e.money.minus(a.cost),timeMilestone:s}})}},{key:"clickUpgrade",value:function(e){console.log("upgrade click ",e.name);var t=this.state.upgrades.findIndex(function(t){return t.name===e.name});switch(this.setState({upgrades:v()(this.state.upgrades,Object(u.a)({},t,{purchased:{$set:!0}}))}),e.costType){case"money":this.setState({money:this.state.money.minus(e.costValue)});break;case"knowledge":this.setState({knowledge:this.state.knowledge.minus(e.costValue)})}switch(e.rewardType){case"upgradeMult":var a=this.state.businesses.findIndex(function(t){return t.name===e.rewardTarget});this.setState({businesses:v()(this.state.businesses,Object(u.a)({},a,{$set:I.applyMultiplier(this.state.businesses[a],e.rewardValue)}))}),this.addOverlay(this.state.businesses[a],"x"+e.rewardValue),console.log(this.state.businesses[a].name,"received multiplier",e.rewardValue);break;default:console.log("unknown rewardType")}}},{key:"clickAnnouncement",value:function(e){console.log("announcement click ",e.id,e.text);var t=this.state.announcements.findIndex(function(t){return t.id===e.id});this.setState({announcements:v()(this.state.announcements,Object(u.a)({},t,{ack:{$set:!0},counter:{$set:0}}))})}},{key:"announce",value:function(e){var t=this;console.log("announce ",e);var a=new Date,n=a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+"."+a.getMilliseconds();this.setState(function(a){return{announcements:[].concat(Object(i.a)(a.announcements),[{id:t.announceCt++,createTime:n,text:e,counter:0,expire:3,fadeout:.4,ack:!1}])}})}},{key:"addOverlay",value:function(e,t){var a=this;console.log("addOverlay click ",t,e.name);var n=this.state.businesses.findIndex(function(t){return t.name===e.name});console.log("idx:",n);var s=30*Math.random()-15,r=20*Math.random()-10;this.setState(function(e,o){return{businesses:v()(e.businesses,Object(u.a)({},n,{overlays:{$push:[{id:a.overlayCt++,counter:0,expire:1,xTarget:s,yTarget:r,text:t}]}}))}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"wrapper"},s.a.createElement("div",{id:"header"},s.a.createElement(S,{money:this.state.money,knowledge:this.state.knowledge,businesses:this.state.businesses,probes:this.state.probes,prestige:this.state.prestige,prestigeNext:this.state.prestigeNext})),s.a.createElement(E.d,{className:"react-tabs-container",selectedIndex:this.tabIndex,onSelect:function(t){return e.tabIndex=t}},s.a.createElement("div",{id:"tabs"},s.a.createElement(E.b,{className:"tab-list"},s.a.createElement(E.a,{className:"tab-list-item"},"Businesses"),s.a.createElement(E.a,{className:"tab-list-item"},"Probes"))),s.a.createElement(E.c,{className:"react-tabs__tab-panel main-tab-panel"},s.a.createElement("div",{className:"left-sidebar"},s.a.createElement(R,{upgrades:this.state.upgrades,businesses:this.state.businesses,money:this.state.money,knowledge:this.state.knowledge,onClick:this.clickUpgrade})),s.a.createElement("div",{id:"right-sidebar"},s.a.createElement("div",{className:"purchaseAmts"},s.a.createElement("span",{className:"buyx-prefix"},"Buy ",M.multiplySymbol),s.a.createElement(b.a,{options:M.purchaseOpts,onChange:this.purchaseAmtDropDownHandler,value:this.purchaseAmt,placeholder:"Select an option"})),s.a.createElement("button",{className:"testbutton pause-button",onClick:this.pause},"Pause"),s.a.createElement("button",{className:"testbutton pause-button",onClick:this.resume},"Resume"),s.a.createElement("button",{className:"testbutton reset-button",onClick:this.resetAll},"RESET"),s.a.createElement("button",{className:"testbutton prestige-button",disabled:!this.state.prestigeNext.gt(0),onClick:this.prestige},"Prestige"),s.a.createElement("button",{className:"testbutton test-give-prestige",onClick:this.prestigeCheat},"+",this.cheatPrestigeVal," prestige"),s.a.createElement("button",{className:"testbutton announce-button",onClick:function(){return e.announce("great job winning!  oh boy this is just super.")}},"Announce"),s.a.createElement("button",{className:"testbutton overlay-button",onClick:function(){return e.addOverlay({name:"Odd Jobs"},"X2")}},"Odd Jobs Overlay"),s.a.createElement("button",{className:"testbutton overlay-button",onClick:function(){return e.addOverlay({name:"Newspaper Delivery"},"X2")}},"Newspaper Overlay"),s.a.createElement("button",{className:"testbutton ref-button",onClick:function(){return console.log("domRef:",e.state.businesses[0].domRef)}},"Odd Job domRef"),s.a.createElement("button",{className:"testbutton ref-button",onClick:function(){return console.log("domRef2:",e.state.businesses[1].domRef)}},"Newspaper domRef"),s.a.createElement("button",{className:"testbutton ref-button",onClick:function(){return console.log("getRect:",I.getPosition(e.state.businesses[0].domRef))}},"getRect"),s.a.createElement("button",{className:"testbutton save-button",onClick:this.saveGame},"SAVE")),s.a.createElement("div",{id:"content"},s.a.createElement("div",{className:"container"},s.a.createElement(I,{businesses:this.state.businesses,purchaseAmt:this.purchaseAmt,money:this.state.money,prestige:this.state.prestige,onClick:this.clickBusiness,domRefs:this.domRefs})))),s.a.createElement(E.c,{className:"react-tabs__tab-panel probe-tab-panel"},s.a.createElement("div",{id:"right-sidebar"}),s.a.createElement("div",{id:"probecontent"},s.a.createElement("div",{className:"probecontainer"},"text for panel 2")))),s.a.createElement("div",{id:"footer"},"v. 0.0.1"),s.a.createElement("div",{id:"announcements"},s.a.createElement(F,{announcements:this.state.announcements,onClick:this.clickAnnouncement})))}}]),t}(s.a.Component);o.a.render(s.a.createElement(U,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.785880b5.chunk.js.map